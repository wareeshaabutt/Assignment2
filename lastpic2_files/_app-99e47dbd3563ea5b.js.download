(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2888],{1075:function(c,m,y){"use strict";var k=y(4331),w=Object.prototype.toString,isNumber=function(c){var m=typeof c;return"number"===m||"object"===m&&"[object Number]"===w.call(c)},S="function"==typeof Array.isArray?Array.isArray:function(c){return"[object Array]"===w.call(c)},arrayEach=function(c,m){for(var y=0;y<m.length&&!1!==c(m[y],y,m);y+=1);},baseEach=function(c,m){for(var y=k(m),w=0;w<y.length&&!1!==c(m[y[w]],y[w],m);w+=1);};c.exports=function(c,m){return(null!=m&&(S(m)||"function"!==m&&isNumber(m.length))?arrayEach:baseEach).call(this,c,m)}},4331:function(c){"use strict";var m=Object.prototype.hasOwnProperty,y=String.prototype.charAt,k=Object.prototype.toString,charAt=function(c,m){return y.call(c,m)},has=function(c,y){return m.call(c,y)},indexKeys=function(c,m){m=m||has;for(var y=[],k=0,w=c.length;k<w;k+=1)m(c,k)&&y.push(String(k));return y},objectKeys=function(c,m){m=m||has;var y=[];for(var k in c)m(c,k)&&y.push(String(k));return y};c.exports=function(c){return null==c?[]:"[object String]"===k.call(c)?indexKeys(c,charAt):null!=c&&"function"!=typeof c&&"number"==typeof c.length?indexKeys(c,has):objectKeys(c)}},8580:function(c,m,y){"use strict";var k=y(1075);c.exports=function(c,m){if("function"!=typeof c)throw TypeError("Expected a function but received a "+typeof c);var y=[];return k(function(m,k,w){y.push(c(m,k,w))},m),y}},8235:function(c){c.exports=function(c){var m;return"(function(){\n\n  // Create a queue, but don't obliterate an existing one!\n  var analytics = window.analytics = window.analytics || [];\n\n  // If the real analytics.js is already on the page return.\n  if (analytics.initialize) return;\n\n  // If the snippet was invoked already show an error.\n  if (analytics.invoked) {\n    if (window.console && console.error) {\n      console.error('Segment snippet included twice.');\n    }\n    return;\n  }\n\n  // Invoked flag, to make sure the snippet\n  // is never invoked twice.\n  analytics.invoked = true;\n\n  // A list of the methods in Analytics.js to stub.\n  analytics.methods = [\n    'trackSubmit',\n    'trackClick',\n    'trackLink',\n    'trackForm',\n    'pageview',\n    'identify',\n    'reset',\n    'group',\n    'track',\n    'ready',\n    'alias',\n    'debug',\n    'page',\n    'once',\n    'off',\n    'on',\n    'addSourceMiddleware',\n    'addIntegrationMiddleware',\n    'setAnonymousId',\n    'addDestinationMiddleware'\n  ];\n\n  // Define a factory to create stubs. These are placeholders\n  // for methods in Analytics.js so that you never have to wait\n  // for it to load to actually record data. The `method` is\n  // stored as the first argument, so we can replay the data.\n  analytics.factory = function(e){\n    return function(){\n      if (window.analytics.initialized) {\n        // Sometimes users assigned analytics to a variable before analytics is done loading, resulting in a stale reference.\n        // If so, proxy any calls to the 'real' analytics instance.\n        return window.analytics[e].apply(window.analytics, arguments);\n      }\n      var args = Array.prototype.slice.call(arguments);\n      args.unshift(e);\n      analytics.push(args);\n      return analytics;\n    };\n  };\n\n\n  // For each of our methods, generate a queueing stub.\n  for (var i = 0; i < analytics.methods.length; i++) {\n    var key = analytics.methods[i];\n    analytics[key] = analytics.factory(key);\n  }\n\n  // Define a method to load Analytics.js from our CDN,\n  // and that will be sure to only ever load it once.\n  analytics.load = function(key, options){\n    // Create an async script element based on your key.\n    var t = document.createElement('script');\n    t.type = 'text/javascript';\n    t.async = true;\n    t.src = \"https://"+(null==(m=c.host)?"":m)+(null==(m=c.ajsPath)?"":m)+"\";\n\n    // Insert our script next to the first script element.\n    var first = document.getElementsByTagName('script')[0];\n    first.parentNode.insertBefore(t, first);\n    analytics._loadOptions = options;\n  };\n  analytics._writeKey = '"+(null==(m=c.apiKey)?"":m)+"';\n\n  "+(null==(m=c.optionalCDN)?"":m)+"\n\n  // Add a version to keep track of what's in the wild.\n  analytics.SNIPPET_VERSION = '4.16.1';\n\n  // Load Analytics.js with your key, which will automatically\n  // load the tools you've enabled for your account. Boosh!\n  "+(null==(m=c.load)?"":m)+"\n\n  // Make the first page call to load the integrations. If\n  // you'd like to manually name or tag the page, edit or\n  // move this call however you'd like.\n  "+(null==(m=c.page)?"":m)+"\n})();\n"}},5334:function(c){c.exports=function(c){var m;return'!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){if(window.analytics.initialized)return window.analytics[e].apply(window.analytics,arguments);var i=Array.prototype.slice.call(arguments);i.unshift(e);analytics.push(i);return analytics}};for(var i=0;i<analytics.methods.length;i++){var key=analytics.methods[i];analytics[key]=analytics.factory(key)}analytics.load=function(key,i){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://'+(null==(m=c.host)?"":m)+(null==(m=c.ajsPath)?"":m)+'";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=i};analytics._writeKey="'+(null==(m=c.apiKey)?"":m)+'";'+(null==(m=c.optionalCDN)?"":m)+';analytics.SNIPPET_VERSION="4.16.1";\n'+(null==(m=c.load)?"":m)+"\n"+(null==(m=c.page)?"":m)+"\n}}();"}},2913:function(c,m,y){"use strict";var k=y(8580),w=(y(8235),y(5334)),S=Object.prototype.hasOwnProperty;m.V=function(c){var m,y=((m=c)||(m={}),m.apiKey||(m.apiKey="YOUR_API_KEY"),m.host||(m.host="cdn.segment.com"),m.ajsPath||(m.ajsPath='/analytics.js/v1/" + key + "/analytics.min.js'),m.useHostForBundles||(m.useHostForBundles=!1),S.call(m,"page")||(m.page=!0),S.call(m,"load")||(m.load=!0),m);return y.load=function(c){if(!c.load)return"";if("boolean"!=typeof c.load){var m=JSON.stringify(c.load);return'analytics.load("'+c.apiKey+'", '+m+");"}return'analytics.load("'+c.apiKey+'");'}(y),y.page=function(c){if(!c)return"";var m=[];return c.category&&m.push(c.category),c.name&&m.push(c.name),c.properties&&m.push(c.properties),"analytics.page("+k(JSON.stringify,m).join(", ")+");"}(y.page),y.optionalCDN=y&&"boolean"==typeof y.useHostForBundles&&y.useHostForBundles?'analytics._cdn = "https://'+y.host+'"':"",w(y)}},6840:function(c,m,y){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return y(1781)}])},2572:function(c,m,y){"use strict";y.d(m,{W:function(){return FeedLayoutProvider},d:function(){return useFeedLayout}});var k=y(5893),w=y(7294);let S=(0,w.createContext)({feedLayout:null,setFeedLayout:()=>null}),useFeedLayout=()=>(0,w.useContext)(S),FeedLayoutProvider=c=>{let{children:m}=c,[y,T]=(0,w.useState)("grid");return(0,k.jsx)(S.Provider,{value:{feedLayout:y,setFeedLayout:T},children:m})}},1781:function(c,m,y){"use strict";y.r(m),y.d(m,{default:function(){return _app}});var k,w,S=y(5893),T=y(7294),A=y(4298),$=y.n(A),M=y(1163),q=y(2913);function e(c,m){var y=Object.keys(c);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(c);m&&(k=k.filter(function(m){return Object.getOwnPropertyDescriptor(c,m).enumerable})),y.push.apply(y,k)}return y}function t(c){for(var m=1;m<arguments.length;m++){var y=null!=arguments[m]?arguments[m]:{};m%2?e(Object(y),!0).forEach(function(m){s(c,m,y[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(y)):e(Object(y)).forEach(function(m){Object.defineProperty(c,m,Object.getOwnPropertyDescriptor(y,m))})}return c}function n(c){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(c)}function r(c,m){if(!(c instanceof m))throw TypeError("Cannot call a class as a function")}function i(c,m){for(var y=0;y<m.length;y++){var k=m[y];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(c,k.key,k)}}function o(c,m,y){return m&&i(c.prototype,m),y&&i(c,y),Object.defineProperty(c,"prototype",{writable:!1}),c}function s(c,m,y){return m in c?Object.defineProperty(c,m,{value:y,enumerable:!0,configurable:!0,writable:!0}):c[m]=y,c}function a(c,m){if("function"!=typeof m&&null!==m)throw TypeError("Super expression must either be null or a function");c.prototype=Object.create(m&&m.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),m&&l(c,m)}function u(c){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)})(c)}function l(c,m){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,m){return c.__proto__=m,c})(c,m)}function h(c){var m=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}();return function(){var y,k=u(c);if(m){var w=u(this).constructor;y=Reflect.construct(k,arguments,w)}else y=k.apply(this,arguments);return function(c,m){if(m&&("object"==typeof m||"function"==typeof m))return m;if(void 0!==m)throw TypeError("Derived constructors may only return object or undefined");return function(c){if(void 0===c)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(c)}(this,y)}}function f(c,m){return function(c){if(Array.isArray(c))return c}(c)||function(c,m){var y=null==c?null:"undefined"!=typeof Symbol&&c[Symbol.iterator]||c["@@iterator"];if(null!=y){var k,w,S=[],T=!0,A=!1;try{for(y=y.call(c);!(T=(k=y.next()).done)&&(S.push(k.value),!m||S.length!==m);T=!0);}catch(c){A=!0,w=c}finally{try{T||null==y.return||y.return()}finally{if(A)throw w}}return S}}(c,m)||_(c,m)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(c){return function(c){if(Array.isArray(c))return g(c)}(c)||function(c){if("undefined"!=typeof Symbol&&null!=c[Symbol.iterator]||null!=c["@@iterator"])return Array.from(c)}(c)||_(c)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(c,m){if(c){if("string"==typeof c)return g(c,m);var y=Object.prototype.toString.call(c).slice(8,-1);return"Object"===y&&c.constructor&&(y=c.constructor.name),"Map"===y||"Set"===y?Array.from(c):"Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?g(c,m):void 0}}function g(c,m){(null==m||m>c.length)&&(m=c.length);for(var y=0,k=Array(m);y<m;y++)k[y]=c[y];return k}function v(c,m){var y="undefined"!=typeof Symbol&&c[Symbol.iterator]||c["@@iterator"];if(!y){if(Array.isArray(c)||(y=_(c))||m&&c&&"number"==typeof c.length){y&&(c=y);var k=0,i=function(){};return{s:i,n:function(){return k>=c.length?{done:!0}:{done:!1,value:c[k++]}},e:function(c){throw c},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var w,S=!0,T=!1;return{s:function(){y=y.call(c)},n:function(){var c=y.next();return S=c.done,c},e:function(c){T=!0,w=c},f:function(){try{S||null==y.return||y.return()}finally{if(T)throw w}}}}var N={DEBUG:!1,LIB_VERSION:"1.106.1"},D=Array.isArray,B=Object.prototype,L=B.hasOwnProperty,j=B.toString,H=D||function(c){return"[object Array]"===j.call(c)},F=function(c){return"[object Uint8Array]"===j.call(c)},P=function(c){return"function"==typeof c},R=function(c){return c===Object(c)&&!H(c)},I=function(c){return void 0===c},E=function(c){return"[object String]"==j.call(c)},x=function(c){return null===c},C=function(c){return"[object Number]"==j.call(c)},O=function(c){return"[object Boolean]"===j.call(c)},U="undefined"!=typeof window?window:void 0,V="undefined"!=typeof globalThis?globalThis:U,W=Array.prototype,z=W.forEach,G=W.indexOf,et=null==V?void 0:V.navigator,en=null==V?void 0:V.document,ei=null==V?void 0:V.location,eo=null==V?void 0:V.fetch,es=null==V?void 0:V.XMLHttpRequest,ea=null==et?void 0:et.userAgent,eu=null!=U?U:{},el="[PostHog.js]",ec={_log:function(c){if(U&&(N.DEBUG||eu.POSTHOG_DEBUG)&&!I(U.console)&&U.console){for(var m=("__rrweb_original__"in U.console[c])?U.console[c].__rrweb_original__:U.console[c],y=arguments.length,k=Array(y>1?y-1:0),w=1;w<y;w++)k[w-1]=arguments[w];m.apply(void 0,[el].concat(k))}},info:function(){for(var c=arguments.length,m=Array(c),y=0;y<c;y++)m[y]=arguments[y];ec._log.apply(ec,["log"].concat(m))},warn:function(){for(var c=arguments.length,m=Array(c),y=0;y<c;y++)m[y]=arguments[y];ec._log.apply(ec,["warn"].concat(m))},error:function(){for(var c=arguments.length,m=Array(c),y=0;y<c;y++)m[y]=arguments[y];ec._log.apply(ec,["error"].concat(m))},critical:function(){for(var c,m=arguments.length,y=Array(m),k=0;k<m;k++)y[k]=arguments[k];(c=console).error.apply(c,[el].concat(y))},uninitializedWarning:function(c){ec.error("You must initialize PostHog before calling ".concat(c))}},ed={},Q=function(c){return c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function Y(c,m,y){if(H(c)){if(z&&c.forEach===z)c.forEach(m,y);else if("length"in c&&c.length===+c.length){for(var k=0,w=c.length;k<w;k++)if(k in c&&m.call(y,c[k],k)===ed)return}}}function J(c,m,y){if(!x(c)&&!I(c)){if(H(c))return Y(c,m,y);if(c instanceof FormData){var k,w=v(c.entries());try{for(w.s();!(k=w.n()).done;){var S=k.value;if(m.call(y,S[1],S[0])===ed)return}}catch(c){w.e(c)}finally{w.f()}}else for(var T in c)if(L.call(c,T)&&m.call(y,c[T],T)===ed)return}}var K=function(c){for(var m=arguments.length,y=Array(m>1?m-1:0),k=1;k<m;k++)y[k-1]=arguments[k];return Y(y,function(m){for(var y in m)void 0!==m[y]&&(c[y]=m[y])}),c};function X(c,m){return -1!==c.indexOf(m)}function Z(c){for(var m=Object.keys(c),y=m.length,k=Array(y);y--;)k[y]=[m[y],c[m[y]]];return k}var ee=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},te=function(c){try{return c()}catch(c){return}},ne=function(c){return function(){try{for(var m=arguments.length,y=Array(m),k=0;k<m;k++)y[k]=arguments[k];return c.apply(this,y)}catch(c){ec.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),ec.critical(c)}}},re=function(c){var m={};return J(c,function(c,y){E(c)&&c.length>0&&(m[y]=c)}),m};function oe(c){var m,y,k,w,S,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",A=0,$=0,M="",q=[];if(!c)return c;c=se(c);do m=(S=c.charCodeAt(A++)<<16|c.charCodeAt(A++)<<8|c.charCodeAt(A++))>>18&63,y=S>>12&63,k=S>>6&63,w=63&S,q[$++]=T.charAt(m)+T.charAt(y)+T.charAt(k)+T.charAt(w);while(A<c.length);switch(M=q.join(""),c.length%3){case 1:M=M.slice(0,-2)+"==";break;case 2:M=M.slice(0,-1)+"="}return M}var se=function(c){var m,y,k,w,S="";for(m=y=0,k=(c=(c+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,w=0;w<k;w++){var T=c.charCodeAt(w),A=null;T<128?y++:A=T>127&&T<2048?String.fromCharCode(T>>6|192,63&T|128):String.fromCharCode(T>>12|224,T>>6&63|128,63&T|128),x(A)||(y>m&&(S+=c.substring(m,y)),S+=A,m=y=w+1)}return y>m&&(S+=c.substring(m,c.length)),S},eh=function(){function e(c){return c&&(c.preventDefault=e.preventDefault,c.stopPropagation=e.stopPropagation),c}return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},function(c,m,y,k,w){if(c){if(c.addEventListener&&!k)c.addEventListener(m,y,!!w);else{var S="on"+m,T=c[S];c[S]=function(m){if(m=m||e(null==U?void 0:U.event)){var k,w=!0;P(T)&&(k=T(m));var S=y.call(c,m);return!1!==k&&!1!==S||(w=!1),w}}}}else ec.error("No valid element provided to register_event")}}();function ue(c,m){var n=function(){if(!en)return m("document not found");var y=en.createElement("script");y.type="text/javascript",y.src=c,y.onload=function(c){return m(void 0,c)},y.onerror=function(c){return m(c)};var k,w=en.querySelectorAll("body > script");w.length>0?null===(k=w[0].parentNode)||void 0===k||k.insertBefore(y,w[0]):en.body.appendChild(y)};null!=en&&en.body?n():null==en||en.addEventListener("DOMContentLoaded",n)}function le(c){return c?Q(c).split(/\s+/):[]}function ce(c){var m="";switch(n(c.className)){case"string":m=c.className;break;case"object":m=("baseVal"in c.className?c.className.baseVal:null)||c.getAttribute("class")||"";break;default:m=""}return le(m)}function de(c){var m="";return me(c)&&!ye(c)&&c.childNodes&&c.childNodes.length&&J(c.childNodes,function(c){pe(c)&&c.textContent&&(m+=Q(c.textContent).split(/(\s+)/).filter(be).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))}),Q(m)}function he(c){return!!c&&1===c.nodeType}function fe(c,m){return!!c&&!!c.tagName&&c.tagName.toLowerCase()===m.toLowerCase()}function pe(c){return!!c&&3===c.nodeType}function _e(c){return!!c&&11===c.nodeType}var ef=["a","button","form","input","select","textarea","label"];function me(c){for(var m=c;m.parentNode&&!fe(m,"body");m=m.parentNode){var y=ce(m);if(X(y,"ph-sensitive")||X(y,"ph-no-capture"))return!1}if(X(ce(c),"ph-include"))return!0;var k=c.type||"";if(E(k))switch(k.toLowerCase()){case"hidden":case"password":return!1}var w=c.name||c.id||"";return!(E(w)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(w.replace(/[^a-zA-Z0-9]/g,"")))}function ye(c){return!!(fe(c,"input")&&!["button","checkbox","submit","reset"].includes(c.type)||fe(c,"select")||fe(c,"textarea")||"true"===c.getAttribute("contenteditable"))}function be(c){return!(x(c)||I(c)||E(c)&&(c=Q(c),/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((c||"").replace(/[- ]/g,""))||/(^\d{3}-?\d{2}-?\d{4}$)/.test(c)))}function ke(c){var m=de(c);return be(m="".concat(m," ").concat(function we(c){var m="";return c&&c.childNodes&&c.childNodes.length&&J(c.childNodes,function(c){var y;if(c&&"span"===(null===(y=c.tagName)||void 0===y?void 0:y.toLowerCase()))try{var k=de(c);m="".concat(m," ").concat(k).trim(),c.childNodes&&c.childNodes.length&&(m="".concat(m," ").concat(we(c)).trim())}catch(c){ec.error(c)}}),m}(c)).trim())?m:""}function Fe(c){return c.replace(/"|\\"/g,'\\"')}var ep=function(){function e(c){r(this,e),this.clicks=[],this.enabled=c}return o(e,[{key:"isRageClick",value:function(c,m,y){if(!this.enabled)return!1;var k=this.clicks[this.clicks.length-1];if(k&&Math.abs(c-k.x)+Math.abs(m-k.y)<30&&y-k.timestamp<1e3){if(this.clicks.push({x:c,y:m,timestamp:y}),3===this.clicks.length)return!0}else this.clicks=[{x:c,y:m,timestamp:y}];return!1}}]),e}(),e_="$people_distinct_id",eg="__alias",ev="__timers",em="$autocapture_disabled_server_side",ey="$session_recording_enabled_server_side",eb="$console_log_recording_enabled_server_side",ek="$session_recording_recorder_version_server_side",ew="$session_recording_network_payload_capture",eS="$session_recording_canvas_recording",eF="$sesid",eP="$session_is_sampled",eI="$enabled_feature_flags",eR="$early_access_features",eE="$stored_person_properties",ex="$stored_group_properties",eC="$surveys",eO="$flag_call_reported",eT="$user_state",eA="$posthog_quota_limited",e$="$client_session_props",eM=[e_,eg,"__cmpns",ev,ey,eF,eI,eT,eA,eR,ex,eE,eC,eO,e$];function Qe(c,m){return m.length>c?m.slice(0,c)+"...":m}var eq={_initializedTokens:[],_isDisabledServerSide:null,_isAutocaptureEnabled:!1,_setIsAutocaptureEnabled:function(c){var m,y=x(this._isDisabledServerSide)?!(null===(m=c.persistence)||void 0===m||!m.props[em]):this._isDisabledServerSide,k=!!c.config.autocapture;this._isAutocaptureEnabled=k&&!y},_previousElementSibling:function(c){if(c.previousElementSibling)return c.previousElementSibling;var m=c;do m=m.previousSibling;while(m&&!he(m));return m},_getAugmentPropertiesFromElement:function(c){if(!me(c))return{};var m={};return J(c.attributes,function(c){if(0===c.name.indexOf("data-ph-capture-attribute")){var y=c.name.replace("data-ph-capture-attribute-",""),k=c.value;y&&k&&be(k)&&(m[y]=k)}}),m},_getPropertiesFromElement:function(c,m,y){var k,w=c.tagName.toLowerCase(),S={tag_name:w};ef.indexOf(w)>-1&&!y&&("a"===w.toLowerCase()||"button"===w.toLowerCase()?S.$el_text=Qe(1024,ke(c)):S.$el_text=Qe(1024,de(c)));var T=ce(c);T.length>0&&(S.classes=T.filter(function(c){return""!==c}));var A=null===(k=this.config)||void 0===k?void 0:k.element_attribute_ignorelist;J(c.attributes,function(y){var k;if((!ye(c)||-1!==["name","id","class"].indexOf(y.name))&&(null==A||!A.includes(y.name))&&!m&&be(y.value)&&(!E(k=y.name)||"_ngcontent"!==k.substring(0,10)&&"_nghost"!==k.substring(0,7))){var w=y.value;"class"===y.name&&(w=le(w).join(" ")),S["attr__"+y.name]=Qe(1024,w)}});for(var $=1,M=1,q=c;q=this._previousElementSibling(q);)$++,q.tagName===c.tagName&&M++;return S.nth_child=$,S.nth_of_type=M,S},_getDefaultProperties:function(c){return{$event_type:c,$ce_version:1}},_extractCustomPropertyValue:function(c){var m=[];return J(null==en?void 0:en.querySelectorAll(c.css_selector),function(c){var y;["input","select"].indexOf(c.tagName.toLowerCase())>-1?y=c.value:c.textContent&&(y=c.textContent),be(y)&&m.push(y)}),m.join(", ")},_getCustomProperties:function(c){var m=this,y={};return J(this._customProperties,function(k){J(k.event_selectors,function(w){J(null==en?void 0:en.querySelectorAll(w),function(w){X(c,w)&&me(w)&&(y[k.name]=m._extractCustomPropertyValue(k))})})}),y},_getEventTarget:function(c){var m;return I(c.target)?c.srcElement||null:null!==(m=c.target)&&void 0!==m&&m.shadowRoot?c.composedPath()[0]||null:c.target||null},_captureEvent:function(c,m){var y,k=this,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"$autocapture",S=this._getEventTarget(c);if(pe(S)&&(S=S.parentNode||null),"$autocapture"===w&&"click"===c.type&&c instanceof MouseEvent&&null!==(y=this.rageclicks)&&void 0!==y&&y.isRageClick(c.clientX,c.clientY,(new Date).getTime())&&this._captureEvent(c,m,"$rageclick"),S&&function(c,m){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!U||!c||fe(c,"html")||!he(c))return!1;if(null!=y&&y.url_allowlist){var k=U.location.href,w=y.url_allowlist;if(w&&!w.some(function(c){return k.match(c)}))return!1}if(null!=y&&y.dom_event_allowlist){var S=y.dom_event_allowlist;if(S&&!S.some(function(c){return m.type===c}))return!1}for(var T=!1,A=[c],$=!0,M=c;M.parentNode&&!fe(M,"body");)if(_e(M.parentNode))A.push(M.parentNode.host),M=M.parentNode.host;else{if(!($=M.parentNode||!1))break;if(ef.indexOf($.tagName.toLowerCase())>-1)T=!0;else{var q=U.getComputedStyle($);q&&"pointer"===q.getPropertyValue("cursor")&&(T=!0)}A.push($),M=$}if(!function(c,m){var y=null==m?void 0:m.element_allowlist;if(I(y))return!0;var k,w=v(c);try{for(w.s();!(k=w.n()).done;){var S=function(){var c=k.value;if(y.some(function(m){return c.tagName.toLowerCase()===m}))return{v:!0}}();if("object"===n(S))return S.v}}catch(c){w.e(c)}finally{w.f()}return!1}(A,y)||!function(c,m){var y=null==m?void 0:m.css_selector_allowlist;if(I(y))return!0;var k,w=v(c);try{for(w.s();!(k=w.n()).done;){var S=function(){var c=k.value;if(y.some(function(m){return c.matches(m)}))return{v:!0}}();if("object"===n(S))return S.v}}catch(c){w.e(c)}finally{w.f()}return!1}(A,y))return!1;var N=U.getComputedStyle(c);if(N&&"pointer"===N.getPropertyValue("cursor")&&"click"===m.type)return!0;var D=c.tagName.toLowerCase();switch(D){case"html":return!1;case"form":return"submit"===m.type;case"input":case"select":case"textarea":return"change"===m.type||"click"===m.type;default:return T?"click"===m.type:"click"===m.type&&(ef.indexOf(D)>-1||"true"===c.getAttribute("contenteditable"))}}(S,c,this.config)){for(var T,A,$=[S],M=S;M.parentNode&&!fe(M,"body");)_e(M.parentNode)?($.push(M.parentNode.host),M=M.parentNode.host):($.push(M.parentNode),M=M.parentNode);var q,N=[],D={},B=!1;if(J($,function(c){var y=me(c);"a"===c.tagName.toLowerCase()&&(q=c.getAttribute("href"),q=y&&be(q)&&q),X(ce(c),"ph-no-capture")&&(B=!0),N.push(k._getPropertiesFromElement(c,m.config.mask_all_element_attributes,m.config.mask_all_text)),K(D,k._getAugmentPropertiesFromElement(c))}),m.config.mask_all_text||("a"===S.tagName.toLowerCase()||"button"===S.tagName.toLowerCase()?N[0].$el_text=ke(S):N[0].$el_text=de(S)),q&&(N[0].attr__href=q),B)return!1;var L=K(this._getDefaultProperties(c.type),m.elementsChainAsString?{$elements_chain:N.map(function(c){var m,y,k,w={text:null===(y=c.$el_text)||void 0===y?void 0:y.slice(0,400),tag_name:c.tag_name,href:null===(k=c.attr__href)||void 0===k?void 0:k.slice(0,2048),attr_class:(m=c.attr__class)?H(m)?m:le(m):void 0,attr_id:c.attr__id,nth_child:c.nth_child,nth_of_type:c.nth_of_type,attributes:{}};return Z(c).filter(function(c){return 0===f(c,1)[0].indexOf("attr__")}).forEach(function(c){var m=f(c,2),y=m[0],k=m[1];return w.attributes[y]=k}),w}).map(function(c){var m,y,k="";if(c.tag_name&&(k+=c.tag_name),c.attr_class){c.attr_class.sort();var w,S=v(c.attr_class);try{for(S.s();!(w=S.n()).done;){var T=w.value;k+=".".concat(T.replace(/"/g,""))}}catch(c){S.e(c)}finally{S.f()}}var A=t(t(t(t({},c.text?{text:c.text}:{}),{},{"nth-child":null!==(m=c.nth_child)&&void 0!==m?m:0,"nth-of-type":null!==(y=c.nth_of_type)&&void 0!==y?y:0},c.href?{href:c.href}:{}),c.attr_id?{attr_id:c.attr_id}:{}),c.attributes),$={};return Z(A).sort(function(c,m){var y=f(c,1)[0],k=f(m,1)[0];return y.localeCompare(k)}).forEach(function(c){var m=f(c,2),y=m[0],k=m[1];return $[Fe(y.toString())]=Fe(k.toString())}),k+=":"+Z(A).map(function(c){var m=f(c,2),y=m[0],k=m[1];return"".concat(y,'="').concat(k,'"')}).join("")}).join(";")}:{$elements:N},null!==(T=N[0])&&void 0!==T&&T.$el_text?{$el_text:null===(A=N[0])||void 0===A?void 0:A.$el_text}:{},this._getCustomProperties($),D);return m.capture(w,L),!0}},_navigate:function(c){U&&(U.location.href=c)},_addDomEventHandlers:function(c){var m=this;if(U&&en){var n=function(y){y=y||(null==U?void 0:U.event),m._captureEvent(y,c)};eh(en,"submit",n,!1,!0),eh(en,"change",n,!1,!0),eh(en,"click",n,!1,!0)}},_customProperties:[],rageclicks:null,config:void 0,init:function(c){var m;O(c.__autocapture)||(this.config=c.__autocapture),null!==(m=this.config)&&void 0!==m&&m.url_allowlist&&(this.config.url_allowlist=this.config.url_allowlist.map(function(c){return new RegExp(c)})),this.rageclicks=new ep(c.config.rageclick)},afterDecideResponse:function(c,m){var y=m.config.token;this._initializedTokens.indexOf(y)>-1?ec.info('autocapture already initialized for token "'+y+'"'):(m.persistence&&m.persistence.register(s({},em,!!c.autocapture_opt_out)),this._isDisabledServerSide=!!c.autocapture_opt_out,this._setIsAutocaptureEnabled(m),this._initializedTokens.push(y),c&&c.config&&c.config.enable_collect_everything&&this._isAutocaptureEnabled?(c.custom_properties&&(this._customProperties=c.custom_properties),this._addDomEventHandlers(m)):m.__autocapture=!1)},enabledForProject:function(c,m,y){if(!c)return!0;m=I(m)?10:m,y=I(y)?10:y;for(var k=0,w=0;w<c.length;w++)k+=c.charCodeAt(w);return k%m<y},isBrowserSupported:function(){return P(null==en?void 0:en.querySelectorAll)}};!function(c){for(var m in c)P(c[m])&&(c[m]=c[m].bind(c))}(eq),function(c){for(var m in c)P(c[m])&&(c[m]=ne(c[m]))}(eq);var eN="$active_feature_flags",eD="$override_feature_flags",eB="$feature_flag_payloads",Ze=function(c){var m,y={},k=v(Z(c||{}));try{for(k.s();!(m=k.n()).done;){var w=f(m.value,2),S=w[0],T=w[1];T&&(y[S]=T)}}catch(c){k.e(c)}finally{k.f()}return y},eL=function(){function e(c){r(this,e),this.instance=c,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}return o(e,[{key:"getFlags",value:function(){return Object.keys(this.getFlagVariants())}},{key:"getFlagVariants",value:function(){var c=this.instance.get_property(eI),m=this.instance.get_property(eD);if(!m)return c||{};for(var y=K({},c),k=Object.keys(m),w=0;w<k.length;w++)!1===m[k[w]]?delete y[k[w]]:y[k[w]]=m[k[w]];return this._override_warning||(ec.warn(" Overriding feature flags!",{enabledFlags:c,overriddenFlags:m,finalFlags:y}),this._override_warning=!0),y}},{key:"getFlagPayloads",value:function(){return this.instance.get_property(eB)||{}}},{key:"reloadFeatureFlags",value:function(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}},{key:"setAnonymousDistinctId",value:function(c){this.$anon_distinct_id=c}},{key:"setReloadingPaused",value:function(c){this.reloadFeatureFlagsInAction=c}},{key:"resetRequestQueue",value:function(){this.reloadFeatureFlagsQueued=!1}},{key:"_startReloadTimer",value:function(){var c=this;this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout(function(){!c.reloadFeatureFlagsInAction&&c.reloadFeatureFlagsQueued&&(c.reloadFeatureFlagsQueued=!1,c._reloadFeatureFlagsRequest())},5)}},{key:"_reloadFeatureFlagsRequest",value:function(){var c=this;if(!this.instance.config.advanced_disable_feature_flags){this.setReloadingPaused(!0);var m=this.instance.config.token,y=this.instance.get_property(eE),k=this.instance.get_property(ex),w=oe(JSON.stringify({token:m,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:y,group_properties:k,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0}));this.instance._send_request(this.instance.requestRouter.endpointFor("api","/decide/?v=3"),{data:w},{method:"POST"},this.instance._prepare_callback(function(m){c.$anon_distinct_id=void 0,c.receivedFeatureFlags(m),c.setReloadingPaused(!1),c._startReloadTimer()}))}}},{key:"getFeatureFlag",value:function(c){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0){var y,k=this.getFlagVariants()[c],w="".concat(k),S=this.instance.get_property(eO)||{};return!m.send_event&&"send_event"in m||c in S&&S[c].includes(w)||(H(S[c])?S[c].push(w):S[c]=[w],null===(y=this.instance.persistence)||void 0===y||y.register(s({},eO,S)),this.instance.capture("$feature_flag_called",{$feature_flag:c,$feature_flag_response:k})),k}ec.warn('getFeatureFlag for key "'+c+"\" failed. Feature flags didn't load in time.")}},{key:"getFeatureFlagPayload",value:function(c){return this.getFlagPayloads()[c]}},{key:"isFeatureEnabled",value:function(c){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(c,m);ec.warn('isFeatureEnabled for key "'+c+"\" failed. Feature flags didn't load in time.")}},{key:"addFeatureFlagsHandler",value:function(c){this.featureFlagEventHandlers.push(c)}},{key:"removeFeatureFlagsHandler",value:function(c){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(function(m){return m!==c})}},{key:"receivedFeatureFlags",value:function(c){if(this.instance.persistence){this.instance.decideEndpointWasHit=!0;var m=this.getFlagVariants(),y=this.getFlagPayloads();(function(c,m){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},w=c.featureFlags,S=c.featureFlagPayloads;if(w){if(H(w)){var T,A={};if(w)for(var $=0;$<w.length;$++)A[w[$]]=!0;m&&m.register((s(T={},eN,w),s(T,eI,A),T))}else{var M,q=w,N=S;c.errorsWhileComputingFlags&&(q=t(t({},y),q),N=t(t({},k),N)),m&&m.register((s(M={},eN,Object.keys(Ze(q))),s(M,eI,q||{}),s(M,eB,N||{}),M))}}})(c,this.instance.persistence,m,y),this._fireFeatureFlagsCallbacks()}}},{key:"override",value:function(c){if(!this.instance.__loaded||!this.instance.persistence)return ec.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=!1,!1===c)this.instance.persistence.unregister(eD);else if(H(c)){for(var m={},y=0;y<c.length;y++)m[c[y]]=!0;this.instance.persistence.register(s({},eD,m))}else this.instance.persistence.register(s({},eD,c))}},{key:"onFeatureFlags",value:function(c){var m=this;if(this.addFeatureFlagsHandler(c),this.instance.decideEndpointWasHit){var y=this._prepareFeatureFlagsForCallbacks();c(y.flags,y.flagVariants)}return function(){return m.removeFeatureFlagsHandler(c)}}},{key:"updateEarlyAccessFeatureEnrollment",value:function(c,m){var y,k,w=s({},"$feature_enrollment/".concat(c),m);this.instance.capture("$feature_enrollment_update",{$feature_flag:c,$feature_enrollment:m,$set:w}),this.setPersonPropertiesForFlags(w,!1);var S=t(t({},this.getFlagVariants()),{},s({},c,m));null===(y=this.instance.persistence)||void 0===y||y.register((s(k={},eN,Object.keys(Ze(S))),s(k,eI,S),k)),this._fireFeatureFlagsCallbacks()}},{key:"getEarlyAccessFeatures",value:function(c){var m=this,y=arguments.length>1&&void 0!==arguments[1]&&arguments[1],k=this.instance.get_property(eR);if(k&&!y)return c(k);this.instance._send_request(this.instance.requestRouter.endpointFor("api","/api/early_access_features/?token=".concat(this.instance.config.token)),{},{method:"GET"},function(y){var k,w=y.earlyAccessFeatures;return null===(k=m.instance.persistence)||void 0===k||k.register(s({},eR,w)),c(w)})}},{key:"_prepareFeatureFlagsForCallbacks",value:function(){var c=this.getFlags(),m=this.getFlagVariants();return{flags:c.filter(function(c){return m[c]}),flagVariants:Object.keys(m).filter(function(c){return m[c]}).reduce(function(c,y){return c[y]=m[y],c},{})}}},{key:"_fireFeatureFlagsCallbacks",value:function(){var c=this._prepareFeatureFlagsForCallbacks(),m=c.flags,y=c.flagVariants;this.featureFlagEventHandlers.forEach(function(c){return c(m,y)})}},{key:"setPersonPropertiesForFlags",value:function(c){var m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y=this.instance.get_property(eE)||{};this.instance.register(s({},eE,t(t({},y),c))),m&&this.instance.reloadFeatureFlags()}},{key:"resetPersonPropertiesForFlags",value:function(){this.instance.unregister(eE)}},{key:"setGroupPropertiesForFlags",value:function(c){var m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y=this.instance.get_property(ex)||{};0!==Object.keys(y).length&&Object.keys(y).forEach(function(m){y[m]=t(t({},y[m]),c[m]),delete c[m]}),this.instance.register(s({},ex,t(t({},y),c))),m&&this.instance.reloadFeatureFlags()}},{key:"resetGroupPropertiesForFlags",value:function(c){if(c){var m=this.instance.get_property(ex)||{};this.instance.register(s({},ex,t(t({},m),{},s({},c,{}))))}else this.instance.unregister(ex)}}]),e}();Math.trunc||(Math.trunc=function(c){return c<0?Math.ceil(c):Math.floor(c)}),Number.isInteger||(Number.isInteger=function(c){return C(c)&&isFinite(c)&&Math.floor(c)===c});var ej="0123456789abcdef",eH=function(){function e(c){if(r(this,e),this.bytes=c,16!==c.length)throw TypeError("not 128-bit length")}return o(e,[{key:"toString",value:function(){for(var c="",m=0;m<this.bytes.length;m++)c=c+ej.charAt(this.bytes[m]>>>4)+ej.charAt(15&this.bytes[m]),3!==m&&5!==m&&7!==m&&9!==m||(c+="-");if(36!==c.length)throw Error("Invalid UUIDv7 was generated");return c}},{key:"clone",value:function(){return new e(this.bytes.slice(0))}},{key:"equals",value:function(c){return 0===this.compareTo(c)}},{key:"compareTo",value:function(c){for(var m=0;m<16;m++){var y=this.bytes[m]-c.bytes[m];if(0!==y)return Math.sign(y)}return 0}}],[{key:"fromFieldsV7",value:function(c,m,y,k){if(!Number.isInteger(c)||!Number.isInteger(m)||!Number.isInteger(y)||!Number.isInteger(k)||c<0||m<0||y<0||k<0||c>0xffffffffffff||m>4095||y>1073741823||k>4294967295)throw RangeError("invalid field value");var w=new Uint8Array(16);return w[0]=c/1099511627776,w[1]=c/4294967296,w[2]=c/16777216,w[3]=c/65536,w[4]=c/256,w[5]=c,w[6]=112|m>>>8,w[7]=m,w[8]=128|y>>>24,w[9]=y>>>16,w[10]=y>>>8,w[11]=y,w[12]=k>>>24,w[13]=k>>>16,w[14]=k>>>8,w[15]=k,new e(w)}}]),e}(),eU=function(){function e(){r(this,e),s(this,"timestamp",0),s(this,"counter",0),s(this,"random",new eW)}return o(e,[{key:"generate",value:function(){var c=this.generateOrAbort();if(I(c)){this.timestamp=0;var m=this.generateOrAbort();if(I(m))throw Error("Could not generate UUID after timestamp reset");return m}return c}},{key:"generateOrAbort",value:function(){var c=Date.now();if(c>this.timestamp)this.timestamp=c,this.resetCounter();else{if(!(c+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return eH.fromFieldsV7(this.timestamp,Math.trunc(this.counter/1073741824),1073741823&this.counter,this.random.nextUint32())}},{key:"resetCounter",value:function(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}]),e}(),it=function(c){if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw Error("no cryptographically strong RNG available");for(var m=0;m<c.length;m++)c[m]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return c};U&&!I(U.crypto)&&crypto.getRandomValues&&(it=function(c){return crypto.getRandomValues(c)});var eV,eW=function(){function e(){r(this,e),s(this,"buffer",new Uint32Array(8)),s(this,"cursor",1/0)}return o(e,[{key:"nextUint32",value:function(){return this.cursor>=this.buffer.length&&(it(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}]),e}(),at=function(){return ut().toString()},ut=function(){return(eV||(eV=new eU)).generate()},eJ="",ez=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,eG={is_supported:function(){return!!en},error:function(c){ec.error("cookieStore error: "+c)},get:function(c){if(en){try{for(var m=c+"=",y=en.cookie.split(";").filter(function(c){return c.length}),k=0;k<y.length;k++){for(var w=y[k];" "==w.charAt(0);)w=w.substring(1,w.length);if(0===w.indexOf(m))return decodeURIComponent(w.substring(m.length,w.length))}}catch(c){}return null}},parse:function(c){var m;try{m=JSON.parse(eG.get(c))||{}}catch(c){}return m},set:function(c,m,y,k,w){if(en)try{var S="",T="",A=function(c,m){if(m){var y=function(c){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:en;if(eJ)return eJ;if(!m||["localhost","127.0.0.1"].includes(c))return"";for(var y=c.split("."),k=Math.min(y.length,8),w="dmn_chk_"+at(),S=RegExp("(^|;)\\s*"+w+"=1");!eJ&&k--;){var T=y.slice(k).join("."),A=w+"=1;domain=."+T;m.cookie=A,S.test(m.cookie)&&(m.cookie=A+";expires=Thu, 01 Jan 1970 00:00:00 GMT",eJ=T)}return eJ}(c);if(!y){var k,w=(k=c.match(ez))?k[0]:"";w!==y&&ec.info("Warning: cookie subdomain discovery mismatch",w,y),y=w}return y?"; domain=."+y:""}return""}(en.location.hostname,k);if(y){var $=new Date;$.setTime($.getTime()+24*y*36e5),S="; expires="+$.toUTCString()}w&&(T="; secure");var M=c+"="+encodeURIComponent(JSON.stringify(m))+S+"; SameSite=Lax; path=/"+A+T;return M.length>3686.4&&ec.warn("cookieStore warning: large cookie, len="+M.length),en.cookie=M,M}catch(c){return}},remove:function(c,m){try{eG.set(c,"",-1,m)}catch(c){return}}},eK=null,eQ={is_supported:function(){if(!x(eK))return eK;var c=!0;if(I(U))c=!1;else try{var m="__mplssupport__";eQ.set(m,"xyz"),'"xyz"'!==eQ.get(m)&&(c=!1),eQ.remove(m)}catch(m){c=!1}return c||ec.error("localStorage unsupported; falling back to cookie store"),eK=c,c},error:function(c){ec.error("localStorage error: "+c)},get:function(c){try{return null==U?void 0:U.localStorage.getItem(c)}catch(c){eQ.error(c)}return null},parse:function(c){try{return JSON.parse(eQ.get(c))||{}}catch(c){}return null},set:function(c,m){try{null==U||U.localStorage.setItem(c,JSON.stringify(m))}catch(c){eQ.error(c)}},remove:function(c){try{null==U||U.localStorage.removeItem(c)}catch(c){eQ.error(c)}}},eX=["distinct_id",eF,eP],eY=t(t({},eQ),{},{parse:function(c){try{var m={};try{m=eG.parse(c)||{}}catch(c){}var y=K(m,JSON.parse(eQ.get(c)||"{}"));return eQ.set(c,y),y}catch(c){}return null},set:function(c,m,y,k,w){try{eQ.set(c,m);var S={};eX.forEach(function(c){m[c]&&(S[c]=m[c])}),Object.keys(S).length&&eG.set(c,S,y,k,w)}catch(c){eQ.error(c)}},remove:function(c,m){try{null==U||U.localStorage.removeItem(c),eG.remove(c,m)}catch(c){eQ.error(c)}}}),eZ={},e0={is_supported:function(){return!0},error:function(c){ec.error("memoryStorage error: "+c)},get:function(c){return eZ[c]||null},parse:function(c){return eZ[c]||null},set:function(c,m){eZ[c]=m},remove:function(c){delete eZ[c]}},e1=null,e2={is_supported:function(){if(!x(e1))return e1;if(e1=!0,I(U))e1=!1;else try{var c="__support__";e2.set(c,"xyz"),'"xyz"'!==e2.get(c)&&(e1=!1),e2.remove(c)}catch(c){e1=!1}return e1},error:function(c){ec.error("sessionStorage error: ",c)},get:function(c){try{return null==U?void 0:U.sessionStorage.getItem(c)}catch(c){e2.error(c)}return null},parse:function(c){try{return JSON.parse(e2.get(c))||null}catch(c){}return null},set:function(c,m){try{null==U||U.sessionStorage.setItem(c,JSON.stringify(m))}catch(c){e2.error(c)}},remove:function(c){try{null==U||U.sessionStorage.removeItem(c)}catch(c){e2.error(c)}}},e3=["localhost","127.0.0.1"],e5=!(!es||!("withCredentials"in new es))||!!eo,Ft=function(c){var m=null==en?void 0:en.createElement("a");return I(m)?null:(m.href=c,m)},Rt=function(c){var m,y,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",w=[];return J(c,function(c,k){I(c)||I(k)||"undefined"===k||(m=encodeURIComponent(c instanceof File?c.name:c.toString()),y=encodeURIComponent(k),w[w.length]=y+"="+m)}),w.join(k)},It=function(c,m){for(var y,k=((c.split("#")[0]||"").split("?")[1]||"").split("&"),w=0;w<k.length;w++){var S=k[w].split("=");if(S[0]===m){y=S;break}}if(!H(y)||y.length<2)return"";var T=y[1];try{T=decodeURIComponent(T)}catch(c){ec.error("Skipping decoding for malformed query param: "+T)}return T.replace(/\+/g," ")},Et=function(c,m){var y=c.match(RegExp(m+"=([^&]*)"));return y?y[1]:null},e8={campaignParams:function(c){var m=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gbraid","wbraid","fbclid","msclkid"].concat(c||[]),y={};return J(m,function(c){var m=en?It(en.URL,c):"";m.length&&(y[c]=m)}),y},searchEngine:function(){var c=null==en?void 0:en.referrer;return c?0===c.search("https?://(.*)google.([^/?]*)")?"google":0===c.search("https?://(.*)bing.com")?"bing":0===c.search("https?://(.*)yahoo.com")?"yahoo":0===c.search("https?://(.*)duckduckgo.com")?"duckduckgo":null:null},searchInfo:function(){var c=e8.searchEngine(),m="yahoo"!=c?"q":"p",y={};if(!x(c)){y.$search_engine=c;var k=en?It(en.referrer,m):"";k.length&&(y.ph_keyword=k)}return y},browser:function(c,m,y){return m=m||"",y||X(c," OPR/")?X(c,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(c)?"BlackBerry":X(c,"IEMobile")||X(c,"WPDesktop")?"Internet Explorer Mobile":X(c,"SamsungBrowser/")?"Samsung Internet":X(c,"Edge")||X(c,"Edg/")?"Microsoft Edge":X(c,"FBIOS")?"Facebook Mobile":X(c,"Chrome")?"Chrome":X(c,"CriOS")?"Chrome iOS":X(c,"UCWEB")||X(c,"UCBrowser")?"UC Browser":X(c,"FxiOS")?"Firefox iOS":X(m,"Apple")||X(c,"Safari")&&!X(c,"Chrome")&&!X(c,"Android")?X(c,"Mobile")?"Mobile Safari":"Safari":X(c,"Android")?"Android Mobile":X(c,"Konqueror")||X(c,"konqueror")?"Konqueror":X(c,"Firefox")?"Firefox":X(c,"MSIE")||X(c,"Trident/")?"Internet Explorer":X(c,"Gecko")?"Mozilla":""},browserVersion:function(c,m,y){var k={"Internet Explorer Mobile":[/rv:(\d+(\.\d+)?)/],"Microsoft Edge":[/Edge?\/(\d+(\.\d+)?)/],Chrome:[/Chrome\/(\d+(\.\d+)?)/],"Chrome iOS":[/CriOS\/(\d+(\.\d+)?)/],"UC Browser":[/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/],Safari:[/Version\/(\d+(\.\d+)?)/],"Mobile Safari":[/Version\/(\d+(\.\d+)?)/],Opera:[/(Opera|OPR)\/(\d+(\.\d+)?)/],Firefox:[/Firefox\/(\d+(\.\d+)?)/],"Firefox iOS":[/FxiOS\/(\d+(\.\d+)?)/],Konqueror:[/Konqueror[:/]?(\d+(\.\d+)?)/i],BlackBerry:[/BlackBerry (\d+(\.\d+)?)/,/Version\/(\d+(\.\d+)?)/],"Android Mobile":[/android\s(\d+(\.\d+)?)/],"Samsung Internet":[/SamsungBrowser\/(\d+(\.\d+)?)/],"Internet Explorer":[/(rv:|MSIE )(\d+(\.\d+)?)/],Mozilla:[/rv:(\d+(\.\d+)?)/]}[e8.browser(c,m,y)];if(I(k))return null;for(var w=0;w<k.length;w++){var S=k[w],T=c.match(S);if(T)return parseFloat(T[T.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(c){if(/Windows/i.test(c)){if(/Phone/.test(c)||/WPDesktop/.test(c))return{os_name:"Windows Phone",os_version:""};var m=/Windows NT ([0-9.]+)/i.exec(c);return m&&m[1]?{os_name:"Windows",os_version:m[1]}:{os_name:"Windows",os_version:""}}if(/(iPhone|iPad|iPod)/.test(c)){var y=/OS (\d+)_(\d+)_?(\d+)?/i.exec(c);return y&&y[1]?{os_name:"iOS",os_version:[y[1],y[2],y[3]||"0"].join(".")}:{os_name:"iOS",os_version:""}}if(/Android/.test(c)){var k=/Android (\d+)\.(\d+)\.?(\d+)?/i.exec(c);return k&&k[1]?{os_name:"Android",os_version:[k[1],k[2],k[3]||"0"].join(".")}:{os_name:"Android",os_version:""}}if(/(BlackBerry|PlayBook|BB10)/i.test(c))return{os_name:"BlackBerry",os_version:""};if(/Mac/i.test(c)){var w=/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i.exec(c);return w&&w[1]?{os_name:"Mac OS X",os_version:[w[1],w[2],w[3]||"0"].join(".")}:{os_name:"Mac OS X",os_version:""}}return/Linux/.test(c)?{os_name:"Linux",os_version:""}:/CrOS/.test(c)?{os_name:"Chrome OS",os_version:""}:{os_name:"",os_version:""}},device:function(c){return/Windows Phone/i.test(c)||/WPDesktop/.test(c)?"Windows Phone":/iPad/.test(c)?"iPad":/iPod/.test(c)?"iPod Touch":/iPhone/.test(c)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(c)?"BlackBerry":/Android/.test(c)&&!/Mobile/.test(c)?"Android Tablet":/Android/.test(c)?"Android":""},deviceType:function(c){var m=this.device(c);return"iPad"===m||"Android Tablet"===m?"Tablet":m?"Mobile":"Desktop"},referrer:function(){return(null==en?void 0:en.referrer)||"$direct"},referringDomain:function(){var c;return null!=en&&en.referrer&&(null===(c=Ft(en.referrer))||void 0===c?void 0:c.host)||"$direct"},properties:function(){if(!ea)return{};var c=e8.os(ea);return K(re({$os:c.os_name,$os_version:c.os_version,$browser:e8.browser(ea,navigator.vendor,eu.opera),$device:e8.device(ea),$device_type:e8.deviceType(ea)}),{$current_url:null==ei?void 0:ei.href,$host:null==ei?void 0:ei.host,$pathname:null==ei?void 0:ei.pathname,$raw_user_agent:ea.length>1e3?ea.substring(0,997)+"...":ea,$browser_version:e8.browserVersion(ea,navigator.vendor,eu.opera),$browser_language:e8.browserLanguage(),$screen_height:null==U?void 0:U.screen.height,$screen_width:null==U?void 0:U.screen.width,$viewport_height:null==U?void 0:U.innerHeight,$viewport_width:null==U?void 0:U.innerWidth,$lib:"web",$lib_version:N.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:ee()/1e3})},people_properties:function(){if(!ea)return{};var c=e8.os(ea);return K(re({$os:c.os_name,$os_version:c.os_version,$browser:e8.browser(ea,navigator.vendor,eu.opera)}),{$browser_version:e8.browserVersion(ea,navigator.vendor,eu.opera)})}},e6=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"],e4=function(){function e(c){r(this,e);var m="";c.token&&(m=c.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),this.props={},this.campaign_params_saved=!1,this.custom_campaign_params=c.custom_campaign_params||[],c.persistence_name?this.name="ph_"+c.persistence_name:this.name="ph_"+m+"_posthog",-1===e6.indexOf(c.persistence.toLowerCase())&&(ec.critical("Unknown persistence type "+c.persistence+"; falling back to localStorage+cookie"),c.persistence="localStorage+cookie");var y=c.persistence.toLowerCase();"localstorage"===y&&eQ.is_supported()?this.storage=eQ:"localstorage+cookie"===y&&eY.is_supported()?this.storage=eY:"sessionstorage"===y&&e2.is_supported()?this.storage=e2:"memory"===y?this.storage=e0:"cookie"===y?this.storage=eG:eY.is_supported()?this.storage=eY:this.storage=eG,this.load(),this.update_config(c),this.save()}return o(e,[{key:"properties",value:function(){var c={};return J(this.props,function(m,y){if(y===eI&&R(m))for(var k,w=Object.keys(m),S=0;S<w.length;S++)c["$feature/".concat(w[S])]=m[w[S]];else k=!1,(x(eM)?k:G&&eM.indexOf===G?-1!=eM.indexOf(y):(J(eM,function(c){if(k||(k=c===y))return ed}),k))||(c[y]=m)}),c}},{key:"load",value:function(){if(!this.disabled){var c=this.storage.parse(this.name);c&&(this.props=K({},c))}}},{key:"save",value:function(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure)}},{key:"remove",value:function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}},{key:"clear",value:function(){this.remove(),this.props={}}},{key:"register_once",value:function(c,m,y){var k=this;if(R(c)){I(m)&&(m="None"),this.expire_days=I(y)?this.default_expiry:y;var w=!1;if(J(c,function(c,y){k.props.hasOwnProperty(y)&&k.props[y]!==m||(k.props[y]=c,w=!0)}),w)return this.save(),!0}return!1}},{key:"register",value:function(c,m){var y=this;if(R(c)){this.expire_days=I(m)?this.default_expiry:m;var k=!1;if(J(c,function(m,w){c.hasOwnProperty(w)&&y.props[w]!==m&&(y.props[w]=m,k=!0)}),k)return this.save(),!0}return!1}},{key:"unregister",value:function(c){c in this.props&&(delete this.props[c],this.save())}},{key:"update_campaign_params",value:function(){this.campaign_params_saved||(this.register(e8.campaignParams(this.custom_campaign_params)),this.campaign_params_saved=!0)}},{key:"update_search_keyword",value:function(){this.register(e8.searchInfo())}},{key:"update_referrer_info",value:function(){this.register({$referrer:this.props.$referrer||e8.referrer(),$referring_domain:this.props.$referring_domain||e8.referringDomain()})}},{key:"get_referrer_info",value:function(){return re({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}},{key:"safe_merge",value:function(c){return J(this.props,function(m,y){y in c||(c[y]=m)}),c}},{key:"update_config",value:function(c){this.default_expiry=this.expire_days=c.cookie_expiration,this.set_disabled(c.disable_persistence),this.set_cross_subdomain(c.cross_subdomain_cookie),this.set_secure(c.secure_cookie)}},{key:"set_disabled",value:function(c){this.disabled=c,this.disabled?this.remove():this.save()}},{key:"set_cross_subdomain",value:function(c){c!==this.cross_subdomain&&(this.cross_subdomain=c,this.remove(),this.save())}},{key:"get_cross_subdomain",value:function(){return!!this.cross_subdomain}},{key:"set_secure",value:function(c){c!==this.secure&&(this.secure=c,this.remove(),this.save())}},{key:"set_event_timer",value:function(c,m){var y=this.props[ev]||{};y[c]=m,this.props[ev]=y,this.save()}},{key:"remove_event_timer",value:function(c){var m=(this.props[ev]||{})[c];return I(m)||(delete this.props[ev][c],this.save()),m}},{key:"get_user_state",value:function(){return this.props[eT]||"anonymous"}},{key:"set_user_state",value:function(c){this.props[eT]=c,this.save()}},{key:"get_quota_limits",value:function(){return this.props[eA]||{}}},{key:"set_quota_limits",value:function(c){this.props[eA]=c,this.save()}}]),e}(),e7=o(function e(c){var m,y,k=this,w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),s(this,"bucketSize",100),s(this,"refillRate",10),s(this,"mutationBuckets",{}),s(this,"loggedTracker",{}),s(this,"refillBuckets",function(){Object.keys(k.mutationBuckets).forEach(function(c){k.mutationBuckets[c]=k.mutationBuckets[c]+k.refillRate,k.mutationBuckets[c]>=k.bucketSize&&delete k.mutationBuckets[c]})}),s(this,"getNodeOrRelevantParent",function(c){var m=k.rrweb.mirror.getNode(c);if("svg"!==(null==m?void 0:m.nodeName)&&m instanceof Element){var y=m.closest("svg");if(y)return[k.rrweb.mirror.getId(y),y]}return[c,m]}),s(this,"numberOfChanges",function(c){var m,y,k,w,S,T,A,$;return(null!==(m=null===(y=c.removes)||void 0===y?void 0:y.length)&&void 0!==m?m:0)+(null!==(k=null===(w=c.attributes)||void 0===w?void 0:w.length)&&void 0!==k?k:0)+(null!==(S=null===(T=c.texts)||void 0===T?void 0:T.length)&&void 0!==S?S:0)+(null!==(A=null===($=c.adds)||void 0===$?void 0:$.length)&&void 0!==A?A:0)}),s(this,"throttleMutations",function(c){if(3!==c.type||0!==c.data.source)return c;var m=c.data,y=k.numberOfChanges(m);m.attributes&&(m.attributes=m.attributes.filter(function(c){var m,y,w,S=f(k.getNodeOrRelevantParent(c.id),2),T=S[0],A=S[1];return 0!==k.mutationBuckets[T]&&(k.mutationBuckets[T]=null!==(m=k.mutationBuckets[T])&&void 0!==m?m:k.bucketSize,k.mutationBuckets[T]=Math.max(k.mutationBuckets[T]-1,0),0===k.mutationBuckets[T]&&(k.loggedTracker[T]||(k.loggedTracker[T]=!0,null===(y=(w=k.options).onBlockedNode)||void 0===y||y.call(w,T,A))),c)}));var w=k.numberOfChanges(m);return 0!==w||y===w?c:void 0}),this.rrweb=c,this.options=w,this.refillRate=null!==(m=this.options.refillRate)&&void 0!==m?m:this.refillRate,this.bucketSize=null!==(y=this.options.bucketSize)&&void 0!==y?y:this.bucketSize,setInterval(function(){k.refillBuckets()},1e3)}),e9=((tR=e9||{})[tR.DomContentLoaded=0]="DomContentLoaded",tR[tR.Load=1]="Load",tR[tR.FullSnapshot=2]="FullSnapshot",tR[tR.IncrementalSnapshot=3]="IncrementalSnapshot",tR[tR.Meta=4]="Meta",tR[tR.Custom=5]="Custom",tR[tR.Plugin=6]="Plugin",tR),tt={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:function(c){return c},recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6},tn=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],tr=["/s/","/e/","/i/vo/e/"];function Bt(c,m,y,k){if(I(c)||x(c))return c;var w=(null==m?void 0:m["content-length"])||new Blob([c]).size;return E(w)&&(w=parseInt(w)),w>y?"[SessionReplay] ".concat(k," body too large to record (").concat(w," bytes)"):c}var Nt=function(c,m){var y,k,w=c.session_recording,S=!1!==w.recordHeaders&&m.recordHeaders,T=!1!==w.recordBody&&m.recordBody,A=!1!==w.recordPerformance&&m.recordPerformance,$=(k=Math.min(1e6,null!==(y=w.payloadSizeLimitBytes)&&void 0!==y?y:1e6),function(c){return null!=c&&c.requestBody&&(c.requestBody=Bt(c.requestBody,c.requestHeaders,k,"Request")),null!=c&&c.responseBody&&(c.responseBody=Bt(c.responseBody,c.responseHeaders,k,"Response")),c}),d=function(c){var m;return $(function(c){var m=Ft(c.name);if(!(m&&m.pathname&&tr.includes(m.pathname)))return c}((Object.keys(null!==(m=c.requestHeaders)&&void 0!==m?m:{}).forEach(function(m){var y;tn.includes(m.toLowerCase())&&(null===(y=c.requestHeaders)||void 0===y||delete y[m])}),c)))},M=P(c.session_recording.maskNetworkRequestFn);return M&&P(c.session_recording.maskCapturedNetworkRequestFn)&&ec.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),M&&(c.session_recording.maskCapturedNetworkRequestFn=function(m){var y=c.session_recording.maskNetworkRequestFn({url:m.name});return t(t({},m),{},{name:null==y?void 0:y.url})}),w.maskRequestFn=P(c.session_recording.maskCapturedNetworkRequestFn)?function(m){var y,k,w,S=d(m);return S&&null!==(y=null===(k=(w=c.session_recording).maskCapturedNetworkRequestFn)||void 0===k?void 0:k.call(w,S))&&void 0!==y?y:void 0}:void 0,w.maskRequestFn||(w.maskRequestFn=d),t(t(t({},tt),w),{},{recordHeaders:S,recordBody:T,recordPerformance:A,recordInitialRequests:A})};function Ht(c,m){Jt(!0,c,m)}function Ut(c,m){Jt(!1,c,m)}function Wt(c,m){return"1"===Yt(c,m)}function Vt(c,m){return!!function(c){if(c&&c.respectDnt){var m=c&&c.window||U,y=null==m?void 0:m.navigator,k=!1;return J([null==y?void 0:y.doNotTrack,y.msDoNotTrack,m.doNotTrack],function(c){X([!0,1,"1","yes"],c)&&(k=!0)}),k}return!1}(m)||"0"===Yt(c,m)}function zt(c,m){Gt(m=m||{}).remove(Qt(c,m),!!m.crossSubdomainCookie)}function Gt(c){return"localStorage"===(c=c||{}).persistenceType?eQ:"localStorage+cookie"===c.persistenceType?eY:eG}function Qt(c,m){return((m=m||{}).persistencePrefix||"__ph_opt_in_out_")+c}function Yt(c,m){return Gt(m).get(Qt(c,m))}function Jt(c,m,y){E(m)&&m.length?(Gt(y=y||{}).set(Qt(m,y),c?1:0,C(y.cookieExpiration)?y.cookieExpiration:null,y.crossSubdomainCookie,y.secureCookie),y.capture&&c&&y.capture(y.captureEventName||"$opt_in",y.captureProperties||{},{send_instantly:!0})):ec.error("gdpr."+(c?"optIn":"optOut")+" called with an invalid token")}function Kt(c){var m=!1;try{var y=c.config.token,k=c.config.respect_dnt,w=c.config.opt_out_capturing_persistence_type,S=c.config.opt_out_capturing_cookie_prefix||void 0,T=c.config.window;y&&(m=Vt(y,{respectDnt:k,persistenceType:w,persistencePrefix:S,window:T}))}catch(c){ec.error("Unexpected error when checking capturing opt-out status: "+c)}return m}(tx=tE||(tE={}))[tx.Mutation=0]="Mutation",tx[tx.MouseMove=1]="MouseMove",tx[tx.MouseInteraction=2]="MouseInteraction",tx[tx.Scroll=3]="Scroll",tx[tx.ViewportResize=4]="ViewportResize",tx[tx.Input=5]="Input",tx[tx.TouchMove=6]="TouchMove",tx[tx.MediaInteraction=7]="MediaInteraction",tx[tx.StyleSheetRule=8]="StyleSheetRule",tx[tx.CanvasMutation=9]="CanvasMutation",tx[tx.Font=10]="Font",tx[tx.Log=11]="Log",tx[tx.Drag=12]="Drag",tx[tx.StyleDeclaration=13]="StyleDeclaration",tx[tx.Selection=14]="Selection",tx[tx.AdoptedStyleSheet=15]="AdoptedStyleSheet";var ti=[tE.MouseMove,tE.MouseInteraction,tE.Scroll,tE.ViewportResize,tE.Input,tE.TouchMove,tE.MediaInteraction,tE.Drag],nn=function(c){return{rrwebMethod:c,enqueuedAt:Date.now(),attempt:1}},to=function(){function e(c){var m=this;if(r(this,e),s(this,"queuedRRWebEvents",[]),s(this,"isIdle",!1),s(this,"_linkedFlagSeen",!1),s(this,"_lastActivityTimestamp",Date.now()),s(this,"windowId",null),s(this,"sessionId",null),s(this,"_linkedFlag",null),s(this,"_sampleRate",null),s(this,"_minimumDuration",null),s(this,"_forceAllowLocalhostNetworkCapture",!1),this.instance=c,this._captureStarted=!1,this._endpoint="/s/",this.stopRrweb=void 0,this.receivedDecide=!1,null==U||U.addEventListener("beforeunload",function(){m._flushBuffer()}),null==U||U.addEventListener("offline",function(){m._tryAddCustomEvent("browser offline",{})}),null==U||U.addEventListener("online",function(){m._tryAddCustomEvent("browser online",{})}),!this.instance.sessionManager)throw ec.error("Session recording started without valid sessionManager"),Error("Session recording started without valid sessionManager. This is a bug.");this.buffer=this.clearBuffer()}return o(e,[{key:"started",get:function(){return this._captureStarted}},{key:"sessionManager",get:function(){if(!this.instance.sessionManager)throw ec.error("Session recording started without valid sessionManager"),Error("Session recording started without valid sessionManager. This is a bug.");return this.instance.sessionManager}},{key:"isSampled",get:function(){return C(this._sampleRate)?this.instance.get_property(eP):null}},{key:"sessionDuration",get:function(){var c,m,y=null===(c=this.buffer)||void 0===c?void 0:c.data[(null===(m=this.buffer)||void 0===m?void 0:m.data.length)-1],k=this.sessionManager.checkAndGetSessionAndWindowId(!0).sessionStartTimestamp;return y?y.timestamp-k:null}},{key:"isRecordingEnabled",get:function(){var c=!!this.instance.get_property(ey),m=!this.instance.config.disable_session_recording;return U&&c&&m}},{key:"isConsoleLogCaptureEnabled",get:function(){var c=!!this.instance.get_property(eb),m=this.instance.config.enable_recording_console_log;return null!=m?m:c}},{key:"canvasRecording",get:function(){var c=this.instance.get_property(eS);return c&&c.fps&&c.quality?{enabled:c.enabled,fps:c.fps,quality:c.quality}:void 0}},{key:"recordingVersion",get:function(){var c,m=this.instance.get_property(ek);return(null===(c=this.instance.config.session_recording)||void 0===c?void 0:c.recorderVersion)||m||"v1"}},{key:"networkPayloadCapture",get:function(){var c,m,y=this.instance.get_property(ew),k={recordHeaders:null===(c=this.instance.config.session_recording)||void 0===c?void 0:c.recordHeaders,recordBody:null===(m=this.instance.config.session_recording)||void 0===m?void 0:m.recordBody},w=(null==k?void 0:k.recordHeaders)||(null==y?void 0:y.recordHeaders),S=(null==k?void 0:k.recordBody)||(null==y?void 0:y.recordBody),T=this.instance.config.capture_performance||(null==y?void 0:y.capturePerformance);return w||S||T?{recordHeaders:w,recordBody:S,recordPerformance:T}:void 0}},{key:"status",get:function(){return this.receivedDecide?this.isRecordingEnabled?E(this._linkedFlag)&&!this._linkedFlagSeen?"buffering":O(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"disabled":"buffering"}},{key:"startRecordingIfEnabled",value:function(){this.isRecordingEnabled?(this.startCaptureAndTrySendingQueuedSnapshots(),ec.info("[SessionRecording] started")):(this.stopRecording(),this.clearBuffer())}},{key:"stopRecording",value:function(){this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1,ec.info("[SessionRecording] stopped"))}},{key:"makeSamplingDecision",value:function(c){var m,y,k=this.sessionId!==c;if(C(this._sampleRate)){var w,S=this.isSampled;(w=k||!O(S)?Math.random()<this._sampleRate:S)||ec.warn("[SessionSampling] Sample rate (".concat(this._sampleRate,") has determined that this sessionId (").concat(c,") will not be sent to the server.")),null===(y=this.instance.persistence)||void 0===y||y.register(s({},eP,w))}else null===(m=this.instance.persistence)||void 0===m||m.register(s({},eP,null))}},{key:"afterDecideResponse",value:function(c){var m,y,k,w,S,T,A,$,M,q,N,D=this;this.instance.persistence&&this.instance.persistence.register((s(N={},ey,!!c.sessionRecording),s(N,eb,null===(S=c.sessionRecording)||void 0===S?void 0:S.consoleLogRecordingEnabled),s(N,ek,null===(T=c.sessionRecording)||void 0===T?void 0:T.recorderVersion),s(N,ew,t({capturePerformance:c.capturePerformance},null===(A=c.sessionRecording)||void 0===A?void 0:A.networkPayloadCapture)),s(N,eS,{enabled:null===($=c.sessionRecording)||void 0===$?void 0:$.recordCanvas,fps:null===(M=c.sessionRecording)||void 0===M?void 0:M.canvasFps,quality:null===(q=c.sessionRecording)||void 0===q?void 0:q.canvasQuality}),N));var B=null===(m=c.sessionRecording)||void 0===m?void 0:m.sampleRate;this._sampleRate=I(B)||x(B)?null:parseFloat(B);var L,j=null===(y=c.sessionRecording)||void 0===y?void 0:y.minimumDurationMilliseconds;if(this._minimumDuration=I(j)?null:j,this._linkedFlag=(null===(k=c.sessionRecording)||void 0===k?void 0:k.linkedFlag)||null,null!==(w=c.sessionRecording)&&void 0!==w&&w.endpoint&&(this._endpoint=null===(L=c.sessionRecording)||void 0===L?void 0:L.endpoint),C(this._sampleRate)&&this.sessionManager.onSessionId(function(c){D.makeSamplingDecision(c)}),E(this._linkedFlag)){var H=this._linkedFlag;this.instance.onFeatureFlags(function(c){D._linkedFlagSeen=c.includes(H)})}this.receivedDecide=!0,this.startRecordingIfEnabled()}},{key:"log",value:function(c){var m,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";null===(m=this.instance.sessionRecording)||void 0===m||m.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:y,trace:[],payload:[JSON.stringify(c)]}},timestamp:ee()})}},{key:"startCaptureAndTrySendingQueuedSnapshots",value:function(){this._startCapture()}},{key:"_startCapture",value:function(){var c=this;if(!I(Object.assign)&&!(this._captureStarted||this.instance.config.disable_session_recording||Kt(this.instance))){this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId();var m="v2"===this.recordingVersion?"recorder-v2.js":"recorder.js";this.instance.__loaded_recorder_version!==this.recordingVersion?ue(this.instance.requestRouter.endpointFor("assets","/static/".concat(m,"?v=").concat(N.LIB_VERSION)),function(y){if(y)return ec.error("Could not load ".concat(m),y);c._onScriptLoaded()}):this._onScriptLoaded()}}},{key:"_isInteractiveEvent",value:function(c){var m;return 3===c.type&&-1!==ti.indexOf(null===(m=c.data)||void 0===m?void 0:m.source)}},{key:"_updateWindowAndSessionIds",value:function(c){var m=this._isInteractiveEvent(c);m||this.isIdle||c.timestamp-this._lastActivityTimestamp>3e5&&(this.isIdle=!0,this._tryAddCustomEvent("sessionIdle",{reason:"user inactivity",timeSinceLastActive:c.timestamp-this._lastActivityTimestamp,threshold:3e5}));var y=!1;if(m&&(this._lastActivityTimestamp=c.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:c.type}),y=!0)),!this.isIdle){var k=this.sessionManager.checkAndGetSessionAndWindowId(!m,c.timestamp),w=k.windowId,S=k.sessionId,T=this.sessionId!==S,A=this.windowId!==w;this.windowId=w,this.sessionId=S,(y||-1===[2,4].indexOf(c.type)&&(A||T))&&this._tryTakeFullSnapshot()}}},{key:"_tryRRWebMethod",value:function(c){try{return c.rrwebMethod(),!0}catch(m){return ec.warn("[Session-Recording] could not emit queued rrweb event.",m),this.queuedRRWebEvents.length<10&&this.queuedRRWebEvents.push({enqueuedAt:c.enqueuedAt||Date.now(),attempt:c.attempt++,rrwebMethod:c.rrwebMethod}),!1}}},{key:"_tryAddCustomEvent",value:function(c,m){var y=this;return this._tryRRWebMethod(nn(function(){return y.rrwebRecord.addCustomEvent(c,m)}))}},{key:"_tryTakeFullSnapshot",value:function(){var c=this;return this._tryRRWebMethod(nn(function(){return c.rrwebRecord.takeFullSnapshot()}))}},{key:"_onScriptLoaded",value:function(){var c,m=this,y={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1};this.rrwebRecord=U.rrweb?U.rrweb.record:U.rrwebRecord;for(var k=this.instance.config.session_recording,w=0,S=Object.entries(k||{});w<S.length;w++){var T=f(S[w],2),A=T[0],$=T[1];A in y&&(y[A]=$)}if(this.canvasRecording&&this.canvasRecording.enabled&&(y.recordCanvas=!0,y.sampling={canvas:this.canvasRecording.fps},y.dataURLOptions={type:"image/webp",quality:this.canvasRecording.quality}),this.rrwebRecord){this.mutationRateLimiter=null!==(c=this.mutationRateLimiter)&&void 0!==c?c:new e7(this.rrwebRecord,{onBlockedNode:function(c,y){var k="Too many mutations on node '".concat(c,"'. Rate limiting. This could be due to SVG animations or something similar");ec.info(k,{node:y}),m.log("[PostHog Recorder] "+k,"warn")}}),this._scheduleFullSnapshot();var M=this._gatherRRWebPlugins();this.stopRrweb=this.rrwebRecord(t({emit:function(c){m.onRRwebEmit(c)},plugins:M},y)),this.instance._addCaptureHook(function(c){try{if("$pageview"===c){var y=U?m._maskUrl(U.location.href):"";if(!y)return;m._tryAddCustomEvent("$pageview",{href:y}),m._tryTakeFullSnapshot()}}catch(c){ec.error("Could not add $pageview to rrweb session",c)}}),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:y,activePlugins:M.map(function(c){return null==c?void 0:c.name})}),this._tryAddCustomEvent("$posthog_config",{config:this.instance.config})}else ec.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}},{key:"_scheduleFullSnapshot",value:function(){var c=this;this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),this._fullSnapshotTimer=setInterval(function(){c._tryTakeFullSnapshot()},3e5)}},{key:"_gatherRRWebPlugins",value:function(){var c=[];return eu.rrwebConsoleRecord&&this.isConsoleLogCaptureEnabled&&c.push(eu.rrwebConsoleRecord.getRecordConsolePlugin()),this.networkPayloadCapture&&P(eu.getRecordNetworkPlugin)&&(!e3.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?c.push(eu.getRecordNetworkPlugin(Nt(this.instance.config,this.networkPayloadCapture))):ec.info("[SessionReplay-NetworkCapture] not started because we are on localhost.")),c}},{key:"onRRwebEmit",value:function(c){if(this._processQueuedEvents(),c&&R(c)){if(c.type===e9.Meta){var m=this._maskUrl(c.data.href);if(!m)return;c.data.href=m}c.type===e9.FullSnapshot&&this._scheduleFullSnapshot();var y=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(c):c;if(y){var k=function(c){if(c&&R(c)&&6===c.type&&R(c.data)&&"rrweb/console@1"===c.data.plugin){c.data.payload.payload.length>10&&(c.data.payload.payload=c.data.payload.payload.slice(0,10),c.data.payload.payload.push("...[truncated]"));for(var m=[],y=0;y<c.data.payload.payload.length;y++)c.data.payload.payload[y]&&c.data.payload.payload[y].length>2e3?m.push(c.data.payload.payload[y].slice(0,2e3)+"...[truncated]"):m.push(c.data.payload.payload[y]);return c.data.payload.payload=m,c}return c}(y),w=JSON.stringify(k).length;if(this._updateWindowAndSessionIds(k),!this.isIdle||k.type===e9.Custom){var S={$snapshot_bytes:w,$snapshot_data:k,$session_id:this.sessionId,$window_id:this.windowId};"disabled"!==this.status?this._captureSnapshotBuffered(S):this.clearBuffer()}}}}},{key:"_processQueuedEvents",value:function(){var c=this;if(this.queuedRRWebEvents.length){var m=p(this.queuedRRWebEvents);this.queuedRRWebEvents=[],m.forEach(function(y){Date.now()-y.enqueuedAt>2e3?c._tryAddCustomEvent("rrwebQueueTimeout",{enqueuedAt:y.enqueuedAt,attempt:y.attempt,queueLength:m.length}):c._tryRRWebMethod(y)&&c._tryAddCustomEvent("rrwebQueueSuccess",{enqueuedAt:y.enqueuedAt,attempt:y.attempt,queueLength:m.length})})}}},{key:"_maskUrl",value:function(c){var m=this.instance.config.session_recording;if(m.maskNetworkRequestFn){var y,k={url:c};return null===(y=k=m.maskNetworkRequestFn(k))||void 0===y?void 0:y.url}return c}},{key:"clearBuffer",value:function(){return this.buffer=void 0,{size:0,data:[],sessionId:this.sessionId,windowId:this.windowId}}},{key:"_flushBuffer",value:function(){var c=this;this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var m=this._minimumDuration,y=this.sessionDuration,k=C(y)&&y>=0,w=C(m)&&k&&y<m;return"buffering"===this.status||w?(this.flushBufferTimer=setTimeout(function(){c._flushBuffer()},2e3),this.buffer||this.clearBuffer()):this.buffer&&0!==this.buffer.data.length?(this._captureSnapshot({$snapshot_bytes:this.buffer.size,$snapshot_data:this.buffer.data,$session_id:this.buffer.sessionId,$window_id:this.buffer.windowId}),this.clearBuffer()):this.buffer||this.clearBuffer()}},{key:"_captureSnapshotBuffered",value:function(c){var m,y=this,k=2+((null===(m=this.buffer)||void 0===m?void 0:m.data.length)||0);(!this.buffer||this.buffer.size+c.$snapshot_bytes+k>943718.4||this.buffer.sessionId&&this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),x(this.buffer.sessionId)&&!x(this.sessionId)&&(this.buffer.sessionId=this.sessionId,this.buffer.windowId=this.windowId),this.buffer.size+=c.$snapshot_bytes,this.buffer.data.push(c.$snapshot_data),this.flushBufferTimer||(this.flushBufferTimer=setTimeout(function(){y._flushBuffer()},2e3))}},{key:"_captureSnapshot",value:function(c){this.instance.capture("$snapshot",c,{method:"POST",_url:this.instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings",_metrics:{rrweb_full_snapshot:2===c.$snapshot_data.type}})}}]),e}(),ts=function(){function e(c){r(this,e),this.instance=c,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}return o(e,[{key:"call",value:function(){var c=this,m=oe(JSON.stringify({token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(eE),group_properties:this.instance.get_property(ex),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0}));this.instance._send_request(this.instance.requestRouter.endpointFor("api","/decide/?v=3"),{data:m,verbose:!0},{method:"POST"},function(m){return c.parseDecideResponse(m)})}},{key:"parseDecideResponse",value:function(c){var m,y=this;if(this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer(),0!==(null==c?void 0:c.status)){if(!en||!en.body)return ec.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(function(){y.parseDecideResponse(c)},500);this.instance.toolbar.afterDecideResponse(c),null===(m=this.instance.sessionRecording)||void 0===m||m.afterDecideResponse(c),eq.afterDecideResponse(c,this.instance),this.instance._afterDecideResponse(c),this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(c);var k=null==U?void 0:U.extendPostHogWithSurveys;c.surveys&&!k&&ue(this.instance.requestRouter.endpointFor("assets","/static/surveys.js"),function(c){if(c)return ec.error("Could not load surveys script",c);U.extendPostHogWithSurveys(y.instance)});var w=null==U?void 0:U.extendPostHogWithExceptionAutoCapture;if(c.autocaptureExceptions&&c.autocaptureExceptions&&I(w)&&ue(this.instance.requestRouter.endpointFor("assets","/static/exception-autocapture.js"),function(m){if(m)return ec.error("Could not load exception autocapture script",m);U.extendPostHogWithExceptionAutocapture(y.instance,c)}),c.siteApps){if(this.instance.config.opt_in_site_apps){var S,T=v(c.siteApps);try{for(T.s();!(S=T.n()).done;)(function(){var c=S.value,m=c.id,k=c.url,w=y.instance.requestRouter.endpointFor("assets",k);eu["__$$ph_site_app_".concat(m)]=y.instance,ue(w,function(c){c&&ec.error("Error while initializing PostHog app with config id ".concat(m),c)})})()}catch(c){T.e(c)}finally{T.f()}}else c.siteApps.length>0&&ec.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}else ec.error("Failed to fetch feature flags from PostHog.")}}]),e}(),ta=["source"],tu=null!=U&&U.location?Et(U.location.hash,"__posthog")||Et(location.hash,"state"):null,tl=function(){function e(c){r(this,e),this.instance=c}return o(e,[{key:"afterDecideResponse",value:function(c){var m=c.toolbarParams||c.editorParams||(c.toolbarVersion?{toolbarVersion:c.toolbarVersion}:{});c.isAuthenticated&&m.toolbarVersion&&0===m.toolbarVersion.indexOf("toolbar")&&this.loadToolbar(t({},m))}},{key:"maybeLoadToolbar",value:function(){var c,m,y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!U||!en)return!1;y=null!==(c=y)&&void 0!==c?c:U.location,w=null!==(m=w)&&void 0!==m?m:U.history;try{if(!k){try{U.localStorage.setItem("test","test"),U.localStorage.removeItem("test")}catch(c){return!1}k=null==U?void 0:U.localStorage}var S,T=tu||Et(y.hash,"__posthog")||Et(y.hash,"state"),A=T?te(function(){return JSON.parse(atob(decodeURIComponent(T)))})||te(function(){return JSON.parse(decodeURIComponent(T))}):null;return A&&"ph_authorize"===A.action?((S=A).source="url",S&&Object.keys(S).length>0&&(A.desiredHash?y.hash=A.desiredHash:w?w.replaceState("",en.title,y.pathname+y.search):y.hash="")):((S=JSON.parse(k.getItem("_postHogToolbarParams")||"{}")).source="localstorage",delete S.userIntent),!(!S.token||this.instance.config.token!==S.token)&&(this.loadToolbar(S),!0)}catch(c){return!1}}},{key:"loadToolbar",value:function(c){var m=this;if(!U||eu._postHogToolbarLoaded)return!1;eu._postHogToolbarLoaded=!0;var y=3e5*Math.floor(Date.now()/3e5),k=this.instance.requestRouter.endpointFor("assets","/static/toolbar.js?t=".concat(y)),w="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,S=t(t({token:this.instance.config.token},c),{},{apiURL:this.instance.requestRouter.endpointFor("api")},w?{instrument:!1}:{});S.source;var T=function(c,m){if(null==c)return{};var y,k,w=function(c,m){if(null==c)return{};var y,k,w={},S=Object.keys(c);for(k=0;k<S.length;k++)y=S[k],m.indexOf(y)>=0||(w[y]=c[y]);return w}(c,m);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(c);for(k=0;k<S.length;k++)y=S[k],m.indexOf(y)>=0||Object.prototype.propertyIsEnumerable.call(c,y)&&(w[y]=c[y])}return w}(S,ta);return U.localStorage.setItem("_postHogToolbarParams",JSON.stringify(T)),ue(k,function(c){c?ec.error("Failed to load toolbar",c):(eu.ph_load_toolbar||eu.ph_load_editor)(S,m.instance)}),eh(U,"turbolinks:load",function(){eu._postHogToolbarLoaded=!1,m.loadToolbar(S)}),!0}},{key:"_loadEditor",value:function(c){return this.loadToolbar(c)}},{key:"maybeLoadEditor",value:function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return this.maybeLoadToolbar(c,m,y)}}]),e}(),tc=function(){function e(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;r(this,e),this.isPolling=!0,this._event_queue=[],this._empty_queue_count=0,this._poller=void 0,this._pollInterval=c}return o(e,[{key:"setPollInterval",value:function(c){this._pollInterval=c,this.isPolling&&this.poll()}},{key:"poll",value:function(){}},{key:"unload",value:function(){}},{key:"getTime",value:function(){return(new Date).getTime()}}]),e}(),td=function(c){a(i,tc);var m=h(i);function i(c){var y,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return r(this,i),(y=m.call(this,k)).handlePollRequest=c,y}return o(i,[{key:"enqueue",value:function(c,m,y){this._event_queue.push({url:c,data:m,options:y}),this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var c=this;clearTimeout(this._poller),this._poller=setTimeout(function(){if(c._event_queue.length>0){var m=c.formatQueue();for(var y in m)(function(y){var k=m[y],w=k.url,S=k.data,T=k.options;J(S,function(m,y){S[y].offset=Math.abs(S[y].timestamp-c.getTime()),delete S[y].timestamp}),c.handlePollRequest(w,S,T)})(y);c._event_queue.length=0,c._empty_queue_count=0}else c._empty_queue_count++;c._empty_queue_count>4&&(c.isPolling=!1,c._empty_queue_count=0),c.isPolling&&c.poll()},this._pollInterval)}},{key:"unload",value:function(){var c=this;clearTimeout(this._poller);var m=this._event_queue.length>0?this.formatQueue():{};this._event_queue.length=0;var y=Object.values(m);[].concat(p(y.filter(function(c){return 0===c.url.indexOf("/e")})),p(y.filter(function(c){return 0!==c.url.indexOf("/e")}))).map(function(m){var y=m.url,k=m.data,w=m.options;c.handlePollRequest(y,k,t(t({},w),{},{transport:"sendBeacon"}))})}},{key:"formatQueue",value:function(){var c={};return J(this._event_queue,function(m){var y=m.url,k=m.data,w=m.options,S=(w?w._batchKey:null)||y;I(c[S])&&(c[S]={data:[],url:y,options:w}),w&&c[S].options&&c[S].options._metrics&&!c[S].options._metrics.rrweb_full_snapshot&&(c[S].options._metrics.rrweb_full_snapshot=w._metrics.rrweb_full_snapshot),c[S].data.push(k)}),c}}]),i}(),th=Uint8Array,tf=Uint16Array,tp=Uint32Array,t_=new th([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tg=new th([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),tv=new th([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vn=function(c,m){for(var y=new tf(31),k=0;k<31;++k)y[k]=m+=1<<c[k-1];var w=new tp(y[30]);for(k=1;k<30;++k)for(var S=y[k];S<y[k+1];++S)w[S]=S-y[k]<<5|k;return[y,w]},tm=vn(t_,2),ty=tm[0],tb=tm[1];ty[28]=258,tb[258]=28;for(var tk=vn(tg,0)[1],tw=new tf(32768),tS=0;tS<32768;++tS){var tF=(43690&tS)>>>1|(21845&tS)<<1;tF=(61680&(tF=(52428&tF)>>>2|(13107&tF)<<2))>>>4|(3855&tF)<<4,tw[tS]=((65280&tF)>>>8|(255&tF)<<8)>>>1}var Pn=function(c,m,y){for(var k=c.length,w=0,S=new tf(m);w<k;++w)++S[c[w]-1];var T,A=new tf(m);for(w=0;w<m;++w)A[w]=A[w-1]+S[w-1]<<1;if(y){T=new tf(1<<m);var $=15-m;for(w=0;w<k;++w)if(c[w])for(var M=w<<4|c[w],q=m-c[w],N=A[c[w]-1]++<<q,D=N|(1<<q)-1;N<=D;++N)T[tw[N]>>>$]=M}else for(T=new tf(k),w=0;w<k;++w)T[w]=tw[A[c[w]-1]++]>>>15-c[w];return T},tP=new th(288);for(tS=0;tS<144;++tS)tP[tS]=8;for(tS=144;tS<256;++tS)tP[tS]=9;for(tS=256;tS<280;++tS)tP[tS]=7;for(tS=280;tS<288;++tS)tP[tS]=8;var tI=new th(32);for(tS=0;tS<32;++tS)tI[tS]=5;var tR,tE,tx,tC,tO=Pn(tP,9,0),tT=Pn(tI,5,0),On=function(c){return(c/8>>0)+(7&c&&1)},Tn=function(c,m,y){(null==m||m<0)&&(m=0),(null==y||y>c.length)&&(y=c.length);var k=new(c instanceof tf?tf:c instanceof tp?tp:th)(y-m);return k.set(c.subarray(m,y)),k},$n=function(c,m,y){y<<=7&m;var k=m/8>>0;c[k]|=y,c[k+1]|=y>>>8},An=function(c,m,y){y<<=7&m;var k=m/8>>0;c[k]|=y,c[k+1]|=y>>>8,c[k+2]|=y>>>16},Mn=function(c,m){for(var y=[],k=0;k<c.length;++k)c[k]&&y.push({s:k,f:c[k]});var w=y.length,S=y.slice();if(!w)return[new th(0),0];if(1==w){var T=new th(y[0].s+1);return T[y[0].s]=1,[T,1]}y.sort(function(c,m){return c.f-m.f}),y.push({s:-1,f:25001});var A=y[0],$=y[1],M=0,q=1,N=2;for(y[0]={s:-1,f:A.f+$.f,l:A,r:$};q!=w-1;)A=y[y[M].f<y[N].f?M++:N++],$=y[M!=q&&y[M].f<y[N].f?M++:N++],y[q++]={s:-1,f:A.f+$.f,l:A,r:$};var D=S[0].s;for(k=1;k<w;++k)S[k].s>D&&(D=S[k].s);var B=new tf(D+1),L=qn(y[q-1],B,0);if(L>m){k=0;var j=0,H=L-m,U=1<<H;for(S.sort(function(c,m){return B[m.s]-B[c.s]||c.f-m.f});k<w;++k){var V=S[k].s;if(!(B[V]>m))break;j+=U-(1<<L-B[V]),B[V]=m}for(j>>>=H;j>0;){var W=S[k].s;B[W]<m?j-=1<<m-B[W]++-1:++k}for(;k>=0&&j;--k){var z=S[k].s;B[z]==m&&(--B[z],++j)}L=m}return[new th(B),L]},qn=function e(c,m,y){return -1==c.s?Math.max(e(c.l,m,y+1),e(c.r,m,y+1)):m[c.s]=y},Dn=function(c){for(var m=c.length;m&&!c[--m];);for(var y=new tf(++m),k=0,w=c[0],S=1,s=function(c){y[k++]=c},T=1;T<=m;++T)if(c[T]==w&&T!=m)++S;else{if(!w&&S>2){for(;S>138;S-=138)s(32754);S>2&&(s(S>10?S-11<<5|28690:S-3<<5|12305),S=0)}else if(S>3){for(s(w),--S;S>6;S-=6)s(8304);S>2&&(s(S-3<<5|8208),S=0)}for(;S--;)s(w);S=1,w=c[T]}return[y.subarray(0,k),m]},Ln=function(c,m){for(var y=0,k=0;k<m.length;++k)y+=c[k]*m[k];return y},Bn=function(c,m,y){var k=y.length,w=On(m+2);c[w]=255&k,c[w+1]=k>>>8,c[w+2]=255^c[w],c[w+3]=255^c[w+1];for(var S=0;S<k;++S)c[w+S+4]=y[S];return 8*(w+4+k)},Nn=function(c,m,y,k,w,S,T,A,$,M,q){$n(m,q++,y),++w[256];for(var N=Mn(w,15),D=N[0],B=N[1],L=Mn(S,15),j=L[0],H=L[1],U=Dn(D),V=U[0],W=U[1],z=Dn(j),G=z[0],et=z[1],en=new tf(19),ei=0;ei<V.length;++ei)en[31&V[ei]]++;for(ei=0;ei<G.length;++ei)en[31&G[ei]]++;for(var eo=Mn(en,7),es=eo[0],ea=eo[1],eu=19;eu>4&&!es[tv[eu-1]];--eu);var el,ec,ed,eh,ef=M+5<<3,ep=Ln(w,tP)+Ln(S,tI)+T,e_=Ln(w,D)+Ln(S,j)+T+14+3*eu+Ln(en,es)+(2*en[16]+3*en[17]+7*en[18]);if(ef<=ep&&ef<=e_)return Bn(m,q,c.subarray($,$+M));if($n(m,q,1+(e_<ep)),q+=2,e_<ep){el=Pn(D,B,0),ec=D,ed=Pn(j,H,0),eh=j;var eg=Pn(es,ea,0);for($n(m,q,W-257),$n(m,q+5,et-1),$n(m,q+10,eu-4),q+=14,ei=0;ei<eu;++ei)$n(m,q+3*ei,es[tv[ei]]);q+=3*eu;for(var ev=[V,G],em=0;em<2;++em){var ey=ev[em];for(ei=0;ei<ey.length;++ei){var eb=31&ey[ei];$n(m,q,eg[eb]),q+=es[eb],eb>15&&($n(m,q,ey[ei]>>>5&127),q+=ey[ei]>>>12)}}}else el=tO,ec=tP,ed=tT,eh=tI;for(ei=0;ei<A;++ei)if(k[ei]>255){An(m,q,el[(eb=k[ei]>>>18&31)+257]),q+=ec[eb+257],eb>7&&($n(m,q,k[ei]>>>23&31),q+=t_[eb]);var ek=31&k[ei];An(m,q,ed[ek]),q+=eh[ek],ek>3&&(An(m,q,k[ei]>>>5&8191),q+=tg[ek])}else An(m,q,el[k[ei]]),q+=ec[k[ei]];return An(m,q,el[256]),q+ec[256]},tA=new tp([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),t$=new th(0),tM=function(){for(var c=new tp(256),m=0;m<256;++m){for(var y=m,k=9;--k;)y=(1&y&&3988292384)^y>>>1;c[m]=y}return c}(),Wn=function(){var c=4294967295;return{p:function(m){for(var y=c,k=0;k<m.length;++k)y=tM[255&y^m[k]]^y>>>8;c=y},d:function(){return 4294967295^c}}},zn=function(c,m,y){for(;y;++m)c[m]=y,y>>>=8},Gn=function(c,m){var y=m.filename;if(c[0]=31,c[1]=139,c[2]=8,c[8]=m.level<2?4:9==m.level?2:0,c[9]=3,0!=m.mtime&&zn(c,4,Math.floor(new Date(m.mtime||Date.now())/1e3)),y){c[3]=8;for(var k=0;k<=y.length;++k)c[k+10]=y.charCodeAt(k)}};(tq=tC||(tC={})).GZipJS="gzip-js",tq.Base64="base64";var tq,tN,Kn=function(c,m,y){var k=m||{};k.ip=y.ip?1:0,k._=(new Date).getTime().toString(),k.ver=N.LIB_VERSION;var w=c.split("?");if(w.length>1){var S,T=v(w[1].split("&"));try{for(T.s();!(S=T.n()).done;){var A=S.value.split("=")[0];I(k[A])||delete k[A]}}catch(c){T.e(c)}finally{T.f()}}var $=c.indexOf("?")>-1?"&":"?";return c+$+Rt(k)},Xn=function e(c,m){var y;if(m.blob&&c.buffer)return new Blob([F(c)?c:c.buffer],{type:"text/plain"});if(m.sendBeacon||m.blob){var k=e(c,{method:"POST"});return new Blob([k],{type:"application/x-www-form-urlencoded"})}return"POST"!==m.method?null:(y=H(c)||F(c)?"data="+encodeURIComponent(c):"data="+encodeURIComponent(c.data),"compression"in c&&c.compression&&(y+="&compression="+c.compression),y)},Zn=function(c){if(eo&&"fetch"===c.options.transport){var m,y=Xn(c.data,c.options),k=new Headers;J(k,function(c,m){k.append(m,c)}),"POST"!==c.options.method||c.options.blob||k.append("Content-Type","application/x-www-form-urlencoded");var w=c.url;return C(c.retriesPerformedSoFar)&&c.retriesPerformedSoFar>0&&(w=Kn(w,{retry_count:c.retriesPerformedSoFar},{})),void eo(w,{method:(null===(m=c.options)||void 0===m?void 0:m.method)||"GET",headers:k,keepalive:"POST"===c.options.method,body:y}).then(function(m){var y=m.status;return m.text().then(function(m){var w,S,T;if(null===(w=c.onResponse)||void 0===w||w.call(c,{statusCode:y,responseText:m}),200!==y)P(c.onError)&&c.onError({statusCode:y,responseText:m}),(y<400||y>500)&&c.retryQueue.enqueue(t(t({},c),{},{headers:k,retriesPerformedSoFar:(c.retriesPerformedSoFar||0)+1})),null===(S=c.callback)||void 0===S||S.call(c,{status:0});else try{null===(T=c.callback)||void 0===T||T.call(c,JSON.parse(m))}catch(c){ec.error(c)}})}).catch(function(m){var y;ec.error(m),null===(y=c.callback)||void 0===y||y.call(c,{status:0})})}return er(c)},er=function(c){var m=c.url,y=c.data,k=c.headers,w=c.options,S=c.callback,T=c.retriesPerformedSoFar,A=c.retryQueue,$=c.onError,M=c.timeout,q=c.onResponse;C(T)&&T>0&&(m=Kn(m,{retry_count:T},{}));var N=new XMLHttpRequest;N.open(w.method||"GET",m,!0);var D=Xn(y,w);J(k,function(c,m){N.setRequestHeader(m,c)}),"POST"!==w.method||w.blob||N.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),N.timeout=void 0===M?6e4:M,N.withCredentials=!0,N.onreadystatechange=function(){if(4===N.readyState){var c,M={statusCode:N.status,responseText:N.responseText};if(null==q||q(M),200===N.status){if(S){try{c=JSON.parse(N.responseText)}catch(c){return void ec.error(c)}S(c)}}else P($)&&$(M),(N.status<400||N.status>500)&&A.enqueue({url:m,data:y,options:w,headers:k,retriesPerformedSoFar:(T||0)+1,callback:S}),null==S||S({status:0})}},N.send(D)},tD=function(c){a(i,tc);var m=h(i);function i(c,y){var k;return r(this,i),(k=m.call(this)).isPolling=!1,k.queue=[],k.areWeOnline=!0,k.onRequestError=c,k.rateLimiter=y,!I(U)&&"onLine"in U.navigator&&(k.areWeOnline=U.navigator.onLine,U.addEventListener("online",function(){k._handleWeAreNowOnline()}),U.addEventListener("offline",function(){k.areWeOnline=!1})),k}return o(i,[{key:"enqueue",value:function(c){var m=c.retriesPerformedSoFar||0;if(!(m>=10)){var y,k,w,S=(w=(Math.random()-.5)*((k=Math.min(18e5,y=3e3*Math.pow(2,m)))-y/2),Math.ceil(k+w)),T=new Date(Date.now()+S);this.queue.push({retryAt:T,requestData:c});var A="Enqueued failed request for retry in ".concat(S);navigator.onLine||(A+=" (Browser is offline)"),ec.warn(A),this.isPolling||(this.isPolling=!0,this.poll())}}},{key:"poll",value:function(){var c=this;this._poller&&clearTimeout(this._poller),this._poller=setTimeout(function(){c.areWeOnline&&c.queue.length>0&&c.flush(),c.poll()},this._pollInterval)}},{key:"flush",value:function(){var c=new Date(Date.now()),m=this.queue.filter(function(m){return m.retryAt<c});if(m.length>0){this.queue=this.queue.filter(function(m){return m.retryAt>=c});var y,k=v(m);try{for(k.s();!(y=k.n()).done;){var w=y.value.requestData;this._executeXhrRequest(w)}}catch(c){k.e(c)}finally{k.f()}}}},{key:"unload",value:function(){this._poller&&(clearTimeout(this._poller),this._poller=void 0);var c,m=v(this.queue);try{for(m.s();!(c=m.n()).done;){var y=c.value.requestData,k=y.url,w=y.data,S=y.options;if(this.rateLimiter.isRateLimited(S._batchKey))ec.warn("[RetryQueue] is quota limited. Dropping request.");else try{null==U||U.navigator.sendBeacon(k,Xn(w,t(t({},S),{},{sendBeacon:!0})))}catch(c){ec.error(c)}}}catch(c){m.e(c)}finally{m.f()}this.queue=[]}},{key:"_executeXhrRequest",value:function(c){var m=c.url,y=c.data,k=c.options,w=c.headers,S=c.callback,T=c.retriesPerformedSoFar;this.rateLimiter.isRateLimited(k._batchKey)||Zn({url:m,data:y||{},options:k||{},headers:w||{},retriesPerformedSoFar:T||0,callback:S,retryQueue:this,onError:this.onRequestError,onResponse:this.rateLimiter.checkForLimiting})}},{key:"_handleWeAreNowOnline",value:function(){this.areWeOnline=!0,this.flush()}}]),i}(),tB=function(){function e(c,m,y,k){r(this,e),s(this,"_sessionIdChangedHandlers",[]),this.config=c,this.persistence=m,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=y||at,this._windowIdGenerator=k||at;var w=c.persistence_name||c.token,S=c.session_idle_timeout_seconds||1800;if(C(S)?S>1800?ec.warn("session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead."):S<60&&ec.warn("session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead."):(ec.warn("session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."),S=1800),this._sessionTimeoutMs=1e3*Math.min(Math.max(S,60),1800),this._window_id_storage_key="ph_"+w+"_window_id",this._primary_window_exists_storage_key="ph_"+w+"_primary_window_exists",this._canUseSessionStorage()){var T=e2.parse(this._window_id_storage_key),A=e2.parse(this._primary_window_exists_storage_key);T&&!A?this._windowId=T:e2.remove(this._window_id_storage_key),e2.set(this._primary_window_exists_storage_key,!0)}this._listenToReloadWindow()}return o(e,[{key:"onSessionId",value:function(c){var m=this;return I(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(c),this._sessionId&&c(this._sessionId,this._windowId),function(){m._sessionIdChangedHandlers=m._sessionIdChangedHandlers.filter(function(m){return m!==c})}}},{key:"_canUseSessionStorage",value:function(){return"memory"!==this.config.persistence&&!this.persistence.disabled&&e2.is_supported()}},{key:"_setWindowId",value:function(c){c!==this._windowId&&(this._windowId=c,this._canUseSessionStorage()&&e2.set(this._window_id_storage_key,c))}},{key:"_getWindowId",value:function(){return this._windowId?this._windowId:this._canUseSessionStorage()?e2.parse(this._window_id_storage_key):null}},{key:"_setSessionId",value:function(c,m,y){c===this._sessionId&&m===this._sessionActivityTimestamp&&y===this._sessionStartTimestamp||(this._sessionStartTimestamp=y,this._sessionActivityTimestamp=m,this._sessionId=c,this.persistence.register(s({},eF,[m,c,y])))}},{key:"_getSessionId",value:function(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var c=this.persistence.props[eF];return H(c)&&2===c.length&&c.push(c[0]),c||[0,null,0]}},{key:"resetSessionId",value:function(){this._setSessionId(null,null,null)}},{key:"_listenToReloadWindow",value:function(){var c=this;null==U||U.addEventListener("beforeunload",function(){c._canUseSessionStorage()&&e2.remove(c._primary_window_exists_storage_key)})}},{key:"checkAndGetSessionAndWindowId",value:function(){var c=arguments.length>0&&void 0!==arguments[0]&&arguments[0],m=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||(new Date).getTime(),y=f(this._getSessionId(),3),k=y[0],w=y[1],S=y[2],T=this._getWindowId(),A=S&&S>0&&Math.abs(m-S)>864e5,$=!1,M=!w,q=!c&&Math.abs(m-k)>this._sessionTimeoutMs;M||q||A?(w=this._sessionIdGenerator(),T=this._windowIdGenerator(),ec.info("[SessionId] new session ID generated",{sessionId:w,windowId:T,changeReason:{noSessionId:M,activityTimeout:q,sessionPastMaximumLength:A}}),S=m,$=!0):T||(T=this._windowIdGenerator(),$=!0);var N=0===k||!c||A?m:k,D=0===S?(new Date).getTime():S;return this._setWindowId(T),this._setSessionId(w,N,D),$&&this._sessionIdChangedHandlers.forEach(function(c){return c(w,T)}),{sessionId:w,windowId:T,sessionStartTimestamp:D}}}]),e}();(tU=tN||(tN={})).US="us",tU.EU="eu",tU.CUSTOM="custom";var tL=function(){function e(c){r(this,e),this.instance=c}return o(e,[{key:"apiHost",get:function(){return this.instance.config.api_host.trim().replace(/\/$/,"")}},{key:"uiHost",get:function(){var c;return null===(c=this.instance.config.ui_host)||void 0===c?void 0:c.replace(/\/$/,"")}},{key:"region",get:function(){switch(this.apiHost){case"https://app.posthog.com":case"https://us.posthog.com":return tN.US;case"https://eu.posthog.com":return tN.EU;default:return tN.CUSTOM}}},{key:"endpointFor",value:function(c){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(m&&(m="/"===m[0]?m:"/".concat(m)),"ui"===c)return(this.uiHost||this.apiHost)+m;if(!this.instance.config.__preview_ingestion_endpoints||this.region===tN.CUSTOM)return this.apiHost+m;var y="i.posthog.com"+m;switch(c){case"assets":return"https://".concat(this.region,"-assets.").concat(y);case"api":return"https://".concat(this.region,".").concat(y)}}}]),e}(),tj=o(function e(c,m,y,k){r(this,e),this.name="posthog-js",this.setupOnce=function(w){w(function(w){if("error"!==w.level||!c.__loaded)return w;w.tags||(w.tags={});var S,T,A,$,M,q=c.requestRouter.endpointFor("ui","/person/"+c.get_distinct_id());w.tags["PostHog Person URL"]=q,c.sessionRecordingStarted()&&(w.tags["PostHog Recording URL"]=c.get_session_replay_url({withTimestamp:!0}));var N=(null===(S=w.exception)||void 0===S?void 0:S.values)||[],D={$exception_message:null===(T=N[0])||void 0===T?void 0:T.value,$exception_type:null===(A=N[0])||void 0===A?void 0:A.type,$exception_personURL:q,$sentry_event_id:w.event_id,$sentry_exception:w.exception,$sentry_exception_message:null===($=N[0])||void 0===$?void 0:$.value,$sentry_exception_type:null===(M=N[0])||void 0===M?void 0:M.type,$sentry_tags:w.tags};return m&&y&&(D.$sentry_url=(k||"https://sentry.io/organizations/")+m+"/issues/?project="+y+"&query="+w.event_id),c.capture("$exception",D),w})}}),tH=function(){function e(c){var m=this;r(this,e),s(this,"_hasSeenPageView",!1),s(this,"_updateScrollData",function(){m._pageViewData||(m._pageViewData=m._createPageViewData());var c,y,k,w,S=m._pageViewData,T=m._scrollY(),A=m._scrollHeight(),$=m._contentY(),M=m._contentHeight();S.lastScrollY=T,S.maxScrollY=Math.max(T,null!==(c=S.maxScrollY)&&void 0!==c?c:0),S.maxScrollHeight=Math.max(A,null!==(y=S.maxScrollHeight)&&void 0!==y?y:0),S.lastContentY=$,S.maxContentY=Math.max($,null!==(k=S.maxContentY)&&void 0!==k?k:0),S.maxContentHeight=Math.max(M,null!==(w=S.maxContentHeight)&&void 0!==w?w:0)}),this._instance=c}return o(e,[{key:"_createPageViewData",value:function(){var c;return{pathname:null!==(c=null==U?void 0:U.location.pathname)&&void 0!==c?c:""}}},{key:"doPageView",value:function(){var c,m;return this._hasSeenPageView?(m=this._pageViewData,this._pageViewData=this._createPageViewData()):(this._hasSeenPageView=!0,m=void 0,this._pageViewData||(this._pageViewData=this._createPageViewData())),setTimeout(this._updateScrollData,0),t({$prev_pageview_pathname:null===(c=m)||void 0===c?void 0:c.pathname},this._calculatePrevPageScrollProperties(m))}},{key:"doPageLeave",value:function(){var c=this._pageViewData;return t({$prev_pageview_pathname:null==c?void 0:c.pathname},this._calculatePrevPageScrollProperties(c))}},{key:"_calculatePrevPageScrollProperties",value:function(c){if(!c||null==c.maxScrollHeight||null==c.lastScrollY||null==c.maxScrollY||null==c.maxContentHeight||null==c.lastContentY||null==c.maxContentY)return{};var m=c.maxScrollHeight,y=c.lastScrollY,k=c.maxScrollY,w=c.maxContentHeight,S=c.lastContentY,T=c.maxContentY;return m=Math.ceil(m),y=Math.ceil(y),k=Math.ceil(k),w=Math.ceil(w),S=Math.ceil(S),T=Math.ceil(T),{$prev_pageview_last_scroll:y,$prev_pageview_last_scroll_percentage:m<=1?1:ur(y/m,0,1),$prev_pageview_max_scroll:k,$prev_pageview_max_scroll_percentage:m<=1?1:ur(k/m,0,1),$prev_pageview_last_content:S,$prev_pageview_last_content_percentage:w<=1?1:ur(S/w,0,1),$prev_pageview_max_content:T,$prev_pageview_max_content_percentage:w<=1?1:ur(T/w,0,1)}}},{key:"startMeasuringScrollPosition",value:function(){null==U||U.addEventListener("scroll",this._updateScrollData,!0),null==U||U.addEventListener("scrollend",this._updateScrollData,!0),null==U||U.addEventListener("resize",this._updateScrollData)}},{key:"stopMeasuringScrollPosition",value:function(){null==U||U.removeEventListener("scroll",this._updateScrollData),null==U||U.removeEventListener("scrollend",this._updateScrollData),null==U||U.removeEventListener("resize",this._updateScrollData)}},{key:"_scrollElement",value:function(){if(!this._instance.config.scroll_root_selector)return null==U?void 0:U.document.documentElement;var c,m=v(H(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector]);try{for(m.s();!(c=m.n()).done;){var y=c.value,k=null==U?void 0:U.document.querySelector(y);if(k)return k}}catch(c){m.e(c)}finally{m.f()}}},{key:"_scrollHeight",value:function(){var c=this._scrollElement();return c?Math.max(0,c.scrollHeight-c.clientHeight):0}},{key:"_scrollY",value:function(){if(this._instance.config.scroll_root_selector){var c=this._scrollElement();return c&&c.scrollTop||0}return U&&(U.scrollY||U.pageYOffset||U.document.documentElement.scrollTop)||0}},{key:"_contentHeight",value:function(){var c=this._scrollElement();return(null==c?void 0:c.scrollHeight)||0}},{key:"_contentY",value:function(){var c=this._scrollElement(),m=(null==c?void 0:c.clientHeight)||0;return this._scrollY()+m}}]),e}();function ur(c,m,y){return Math.max(m,Math.min(c,y))}var tU,tV,tW,tJ,tz={icontains:function(c){return!!U&&U.location.href.toLowerCase().indexOf(c.toLowerCase())>-1},regex:function(c){var m;return!!U&&(m=U.location.href,!!function(c){try{new RegExp(c)}catch(c){return!1}return!0}(c)&&new RegExp(c).test(m))},exact:function(c){return(null==U?void 0:U.location.href)===c}},tG=function(){function e(c){r(this,e),this.instance=c}return o(e,[{key:"getSurveys",value:function(c){var m=this,y=arguments.length>1&&void 0!==arguments[1]&&arguments[1],k=this.instance.get_property(eC);if(k&&!y)return c(k);this.instance._send_request(this.instance.requestRouter.endpointFor("api","/api/surveys/?token=".concat(this.instance.config.token)),{},{method:"GET"},function(y){var k,w=y.surveys||[];return null===(k=m.instance.persistence)||void 0===k||k.register(s({},eC,w)),c(w)})}},{key:"getActiveMatchingSurveys",value:function(c){var m=this,y=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getSurveys(function(y){return c(y.filter(function(c){return!(!c.start_date||c.end_date)}).filter(function(c){if(!c.conditions)return!0;var m,y,k,w,S=null===(m=c.conditions)||void 0===m||!m.url||tz[null!==(y=null===(k=c.conditions)||void 0===k?void 0:k.urlMatchType)&&void 0!==y?y:"icontains"](c.conditions.url),T=null===(w=c.conditions)||void 0===w||!w.selector||(null==en?void 0:en.querySelector(c.conditions.selector));return S&&T}).filter(function(c){if(!c.linked_flag_key&&!c.targeting_flag_key)return!0;var y=!c.linked_flag_key||m.instance.featureFlags.isFeatureEnabled(c.linked_flag_key),k=!c.targeting_flag_key||m.instance.featureFlags.isFeatureEnabled(c.targeting_flag_key);return y&&k}))},y)}}]),e}(),tK=function(){function e(){var c=this;r(this,e),s(this,"limits",{}),s(this,"checkForLimiting",function(m){var y=m.responseText;if(y&&y.length)try{(JSON.parse(y).quota_limited||[]).forEach(function(m){ec.info("[RateLimiter] ".concat(m||"events"," is quota limited.")),c.limits[m]=(new Date).getTime()+6e4})}catch(c){return void ec.warn('[RateLimiter] could not rate limit - continuing. Error: "'.concat(null==c?void 0:c.message,'"'),{text:y})}})}return o(e,[{key:"isRateLimited",value:function(c){var m=this.limits[c||"events"]||!1;return!1!==m&&(new Date).getTime()<m}}]),e}(),_r=function(){return t({initialPathName:(null==ei?void 0:ei.pathname)||"",referringDomain:e8.referringDomain()},e8.campaignParams())},tQ=function(){function e(c,m,y){var k=this;r(this,e),s(this,"_onSessionIdCallback",function(c){var m=k._getStoredProps();if(!m||m.sessionId!==c){var y={sessionId:c,props:k._sessionSourceParamGenerator()};k._persistence.register(s({},e$,y))}}),this._sessionIdManager=c,this._persistence=m,this._sessionSourceParamGenerator=y||_r,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}return o(e,[{key:"_getStoredProps",value:function(){return this._persistence.props[e$]}},{key:"getSessionProps",value:function(){var c,m=null===(c=this._getStoredProps())||void 0===c?void 0:c.props;return m?{$client_session_initial_referring_host:m.referringDomain,$client_session_initial_pathname:m.initialPathName,$client_session_initial_utm_source:m.utm_source,$client_session_initial_utm_campaign:m.utm_campaign,$client_session_initial_utm_medium:m.utm_medium,$client_session_initial_utm_content:m.utm_content,$client_session_initial_utm_term:m.utm_term}:{}}}]),e}(),tX=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"],mr=function(c,m){if(!c)return!1;var y=c.toLowerCase();return tX.concat(m||[]).some(function(c){var m=c.toLowerCase();return y.includes?y.includes(m):-1!==y.indexOf(m)})};(t3=tV||(tV={}))[t3.INIT_MODULE=0]="INIT_MODULE",t3[t3.INIT_SNIPPET=1]="INIT_SNIPPET";var yr=function(){},tY={},tZ="posthog",t0=!e5&&-1===(null==ea?void 0:ea.indexOf("MSIE"))&&-1===(null==ea?void 0:ea.indexOf("Mozilla")),Sr=function(){var c,m,y;return{api_host:"https://app.posthog.com",api_method:"POST",api_transport:"XHR",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:!!E(y=null==(m=null==en?void 0:en.location)?void 0:m.hostname)&&"herokuapp.com"!==y.split(".").slice(-2).join("."),persistence:"localStorage+cookie",persistence_name:"",cookie_name:"",loaded:yr,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:!0,debug:!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_cookie:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==U||null===(c=U.location)||void 0===c?void 0:c.protocol),ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_blacklist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,on_request_error:function(c){var m="Bad HTTP status: "+c.statusCode+" "+c.responseText;ec.error(m)},get_device_id:function(c){return c},_onCapture:yr,capture_performance:void 0,name:"posthog",callback_fn:"posthog._jsc",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800}},Fr=function(c,m,y,k){var w,S=y!==tZ&&tJ?y?tJ[y]:void 0:tJ,T={initComplete:!1,syncCode:!1},a=function(c){return function(m){T[c]||(T[c]=!0,T.initComplete&&T.syncCode&&(null==k||k(m)))}};if(S&&tW===tV.INIT_MODULE)w=S;else{if(S&&!H(S))return void ec.error("You have already initialized "+y);w=new t2}return w._init(c,m,y,a("initComplete")),w.toolbar.maybeLoadToolbar(),w.sessionRecording=new to(w),w.sessionRecording.startRecordingIfEnabled(),w.config.disable_scroll_properties||w.pageViewManager.startMeasuringScrollPosition(),w.__autocapture=w.config.autocapture,eq._setIsAutocaptureEnabled(w),eq._isAutocaptureEnabled&&(w.__autocapture=w.config.autocapture,eq.enabledForProject(w.config.token,100,100)?eq.isBrowserSupported()?eq.init(w):(w.__autocapture=!1,ec.info("Disabling Automatic Event Collection because this browser is not supported")):(w.__autocapture=!1,ec.info("Not in active bucket: disabling Automatic Event Collection."))),N.DEBUG=N.DEBUG||w.config.debug,!I(S)&&H(S)&&(w._execute_array.call(w.people,S.people),w._execute_array(S)),a("syncCode")(w),w},t1=function(){function e(){r(this,e),s(this,"__forceAllowLocalhost",!1)}return o(e,[{key:"_forceAllowLocalhost",get:function(){return this.__forceAllowLocalhost},set:function(c){ec.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=c}}]),e}(),t2=function(){function e(){var c=this;r(this,e),s(this,"webPerformance",new t1),this.config=Sr(),this.compression={},this.decideEndpointWasHit=!1,this.SentryIntegration=tj,this.segmentIntegration=function(){var m;return Promise&&Promise.resolve||ec.warn("This browser does not have Promise support, and can not use the segment integration"),m=function(m,y){m.event.userId||m.event.anonymousId===c.get_distinct_id()||c.reset(),m.event.userId&&m.event.userId!==c.get_distinct_id()&&(c.register({distinct_id:m.event.userId}),c.reloadFeatureFlags());var k=c._calculate_event_properties(y,m.event.properties);return m.event.properties=Object.assign({},k,m.event.properties),m},{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:function(c){return m(c,c.event.event)},page:function(c){return m(c,"$pageview")},identify:function(c){return m(c,"$identify")},screen:function(c){return m(c,"$screen")}}},this.__captureHooks=[],this.__request_queue=[],this.__loaded=!1,this.__loaded_recorder_version=void 0,this.__autocapture=void 0,this._jsc=function(){},this.analyticsDefaultEndpoint="/e/",this.elementsChainAsString=!1,this.featureFlags=new eL(this),this.toolbar=new tl(this),this.pageViewManager=new tH(this),this.surveys=new tG(this),this.rateLimiter=new tK,this.requestRouter=new tL(this),this.people={set:function(m,y,k){var w=E(m)?s({},m,y):m;c.setPersonProperties(w),null==k||k({})},set_once:function(m,y,k){var w=E(m)?s({},m,y):m;c.setPersonProperties(void 0,w),null==k||k({})}}}return o(e,[{key:"init",value:function(c,m,y){if(I(y))ec.critical("You must name your new library: init(token, config, name)");else if(I(c)||E(c)&&0===c.trim().length)ec.critical("You must provide a token to initialize posthog");else{if(y!==tZ){var k=Fr(c,m,y,function(c){tJ[y]=c,c._loaded()});return tJ[y]=k,k}ec.critical("You must initialize the main posthog object right after you include the PostHog js snippet")}}},{key:"_init",value:function(c){var m,y,k,w=this,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},T=arguments.length>2?arguments[2]:void 0,A=arguments.length>3?arguments[3]:void 0;this.__loaded=!0,this.config={},this._triggered_notifs=[];var $,M={segmentRegister:!1,syncCode:!1},d=function(c){return function(){M[c]||(M[c]=!0,M.segmentRegister&&M.syncCode&&(null==A||A(w)))}};if(S.request_headers=S.request_headers||S.xhr_headers,this.set_config(K({},Sr(),S,{name:T,token:c,callback_fn:(T===tZ?T:tZ+"."+T)+"._jsc"})),this._jsc=function(){},(null!=U&&null!==(m=U.rrweb)&&void 0!==m&&m.record||null!=U&&U.rrwebRecord)&&(this.__loaded_recorder_version=null==U||null===($=U.rrweb)||void 0===$?void 0:$.version),this.persistence=new e4(this.config),this._requestQueue=new td(this._handle_queued_event.bind(this)),this._retryQueue=new tD(this.config.on_request_error,this.rateLimiter),this.__captureHooks=[],this.__request_queue=[],this.sessionManager=new tB(this.config,this.persistence),this.sessionPropsManager=new tQ(this.sessionManager,this.persistence),this.sessionPersistence="sessionStorage"===this.config.persistence?this.persistence:new e4(t(t({},this.config),{},{persistence:"sessionStorage"})),this._gdpr_init(),S.segment?(this.config.get_device_id=function(){return S.segment.user().anonymousId()},S.segment.user().id()&&(this.register({distinct_id:S.segment.user().id()}),this.persistence.set_user_state("identified")),S.segment.register(this.segmentIntegration()).then(d("segmentRegister"))):d("segmentRegister")(),void 0!==(null===(y=S.bootstrap)||void 0===y?void 0:y.distinctID)){var q,N,D=this.config.get_device_id(at()),B=null!==(q=S.bootstrap)&&void 0!==q&&q.isIdentifiedID?D:S.bootstrap.distinctID;this.persistence.set_user_state(null!==(N=S.bootstrap)&&void 0!==N&&N.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:S.bootstrap.distinctID,$device_id:B})}if(this._hasBootstrappedFeatureFlags()){var L,j,H=Object.keys((null===(L=S.bootstrap)||void 0===L?void 0:L.featureFlags)||{}).filter(function(c){var m,y;return!(null===(m=S.bootstrap)||void 0===m||null===(y=m.featureFlags)||void 0===y||!y[c])}).reduce(function(c,m){var y,k;return c[m]=(null===(y=S.bootstrap)||void 0===y||null===(k=y.featureFlags)||void 0===k?void 0:k[m])||!1,c},{}),V=Object.keys((null===(j=S.bootstrap)||void 0===j?void 0:j.featureFlagPayloads)||{}).filter(function(c){return H[c]}).reduce(function(c,m){var y,k,w,T;return null!==(y=S.bootstrap)&&void 0!==y&&null!==(k=y.featureFlagPayloads)&&void 0!==k&&k[m]&&(c[m]=null===(w=S.bootstrap)||void 0===w||null===(T=w.featureFlagPayloads)||void 0===T?void 0:T[m]),c},{});this.featureFlags.receivedFeatureFlags({featureFlags:H,featureFlagPayloads:V})}if(!this.get_distinct_id()){var W=this.config.get_device_id(at());this.register_once({distinct_id:W,$device_id:W},""),this.persistence.set_user_state("anonymous")}null==U||null===(k=U.addEventListener)||void 0===k||k.call(U,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),d("syncCode")()}},{key:"_afterDecideResponse",value:function(c){var m;if(this.compression={},c.supportedCompression&&!this.config.disable_compression){var y,k={},w=v(c.supportedCompression);try{for(w.s();!(y=w.n()).done;)k[y.value]=!0}catch(c){w.e(c)}finally{w.f()}this.compression=k}null!==(m=c.analytics)&&void 0!==m&&m.endpoint&&(this.analyticsDefaultEndpoint=c.analytics.endpoint),c.elementsChainAsString&&(this.elementsChainAsString=c.elementsChainAsString),c.__preview_ingestion_endpoints&&(this.config.__preview_ingestion_endpoints=c.__preview_ingestion_endpoints)}},{key:"_loaded",value:function(){var c=this.config.advanced_disable_decide;c||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(c){ec.critical("`loaded` function failed",c)}this._start_queue_if_opted_in(),this.config.capture_pageview&&en&&this.capture("$pageview",{title:en.title},{send_instantly:!0}),c||(new ts(this).call(),this.featureFlags.resetRequestQueue())}},{key:"_start_queue_if_opted_in",value:function(){var c;this.has_opted_out_capturing()||this.config.request_batching&&(null===(c=this._requestQueue)||void 0===c||c.poll())}},{key:"_dom_loaded",value:function(){var c=this;this.has_opted_out_capturing()||Y(this.__request_queue,function(m){c._send_request.apply(c,p(m))}),this.__request_queue=[],this._start_queue_if_opted_in()}},{key:"_prepare_callback",value:function(c,m){if(I(c))return null;if(e5)return function(y){c(y,m)};var y=this._jsc,k=""+Math.floor(1e8*Math.random()),w=this.config.callback_fn+"["+k+"]";return y[k]=function(w){delete y[k],c(w,m)},w}},{key:"_handle_unload",value:function(){var c,m;this.config.request_batching?(this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave"),null===(c=this._requestQueue)||void 0===c||c.unload(),null===(m=this._retryQueue)||void 0===m||m.unload()):this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave",null,{transport:"sendBeacon"})}},{key:"_handle_queued_event",value:function(c,m,y){var k=JSON.stringify(m);this.__compress_and_send_json_request(c,k,y||tY,yr)}},{key:"__compress_and_send_json_request",value:function(c,m,y,k){var w,S,T,A,$,M,q,N=f((this.compression[tC.GZipJS]?tC.GZipJS:tC.Base64)===tC.GZipJS?[(w=function(c,m){var y=c.length;if(!m&&"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(c);for(var k=new th(c.length+(c.length>>>1)),w=0,o=function(c){k[w++]=c},S=0;S<y;++S){if(w+5>k.length){var T=new th(w+8+(y-S<<1));T.set(k),k=T}var A=c.charCodeAt(S);A<128||m?o(A):(A<2048?o(192|A>>>6):(A>55295&&A<57344?(o(240|(A=65536+(1047552&A)|1023&c.charCodeAt(++S))>>>18),o(128|A>>>12&63)):o(224|A>>>12),o(128|A>>>6&63)),o(128|63&A))}return Tn(k,0,w)}(m),S={mtime:0},T=Wn(),A=w.length,T.p(w),q=($=10+(S.filename&&S.filename.length+1||0),M=function(c,m,y,k,w,S){var T=c.length,A=new th(k+T+5*(1+Math.floor(T/7e3))+w),$=A.subarray(k,A.length-w),M=0;if(!m||T<8)for(var q=0;q<=T;q+=65535){var N=q+65535;N<T?M=Bn($,M,c.subarray(q,N)):($[q]=S,M=Bn($,M,c.subarray(q,T)))}else{for(var D=tA[m-1],B=D>>>13,L=8191&D,j=(1<<y)-1,H=new tf(32768),U=new tf(j+1),V=Math.ceil(y/3),W=2*V,b=function(m){return(c[m]^c[m+1]<<V^c[m+2]<<W)&j},z=new tp(25e3),G=new tf(288),et=new tf(32),en=0,ei=0,eo=(q=0,0),es=0,ea=0;q<T;++q){var eu=b(q),el=32767&q,ec=U[eu];if(H[el]=ec,U[eu]=el,es<=q){var ed=T-q;if((en>7e3||eo>24576)&&ed>423){M=Nn(c,$,0,z,G,et,ei,eo,ea,q-ea,M),eo=en=ei=0,ea=q;for(var eh=0;eh<286;++eh)G[eh]=0;for(eh=0;eh<30;++eh)et[eh]=0}var ef=2,ep=0,e_=L,eg=el-ec&32767;if(ed>2&&eu==b(q-eg))for(var ev=Math.min(B,ed)-1,em=Math.min(32767,q),ey=Math.min(258,ed);eg<=em&&--e_&&el!=ec;){if(c[q+ef]==c[q+ef-eg]){for(var eb=0;eb<ey&&c[q+eb]==c[q+eb-eg];++eb);if(eb>ef){if(ef=eb,ep=eg,eb>ev)break;var ek=Math.min(eg,eb-2),ew=0;for(eh=0;eh<ek;++eh){var eS=q-eg+eh+32768&32767,eF=eS-H[eS]+32768&32767;eF>ew&&(ew=eF,ec=eS)}}}eg+=(el=ec)-(ec=H[el])+32768&32767}if(ep){z[eo++]=268435456|tb[ef]<<18|tk[ep];var eP=31&tb[ef],eI=31&tk[ep];ei+=t_[eP]+tg[eI],++G[257+eP],++et[eI],es=q+ef,++en}else z[eo++]=c[q],++G[c[q]]}}M=Nn(c,$,S,z,G,et,ei,eo,ea,q-ea,M),S||(M=Bn($,M,t$))}return Tn(A,0,k+On(M)+w)}(w,null==S.level?6:S.level,null==S.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(w.length)))):12+S.mem,$,8,!0)).length,Gn(M,S),zn(M,q-8,T.d()),zn(M,q-4,A),M),t(t({},y),{},{blob:!0,urlQueryArgs:{compression:tC.GZipJS}})]:[{data:oe(m)},y],2),D=N[0],B=N[1];this._send_request(c,D,B,k)}},{key:"_send_request",value:function(c,m,y,k){if(this.__loaded&&this._retryQueue&&!this.rateLimiter.isRateLimited(y._batchKey)){if(t0)this.__request_queue.push([c,m,y,k]);else{y=K({method:this.config.api_method,transport:this.config.api_transport,verbose:this.config.verbose},y||{}),e5||(y.method="GET");var w=U&&"sendBeacon"in U.navigator&&"sendBeacon"===y.transport;if(c=Kn(c,y.urlQueryArgs||{},{ip:this.config.ip}),w)try{null==U||U.navigator.sendBeacon(c,Xn(m,t(t({},y),{},{sendBeacon:!0})))}catch(c){}else if(e5||!en)try{Zn({url:c,data:m,headers:this.config.request_headers,options:y,callback:k,retriesPerformedSoFar:0,retryQueue:this._retryQueue,onError:this.config.on_request_error,onResponse:this.rateLimiter.checkForLimiting})}catch(c){ec.error(c)}else{var S,T=en.createElement("script");T.type="text/javascript",T.async=!0,T.defer=!0,T.src=c;var A=en.getElementsByTagName("script")[0];null===(S=A.parentNode)||void 0===S||S.insertBefore(T,A)}}}}},{key:"_execute_array",value:function(c){var m,y=this,k=[],w=[],S=[];Y(c,function(c){c&&(H(m=c[0])?S.push(c):P(c)?c.call(y):H(c)&&"alias"===m?k.push(c):H(c)&&-1!==m.indexOf("capture")&&P(y[m])?S.push(c):w.push(c))});var s=function(c,m){Y(c,function(c){if(H(c[0])){var y=m;J(c,function(c){y=y[c[0]].apply(y,c.slice(1))})}else this[c[0]].apply(this,c.slice(1))},m)};s(k,this),s(w,this),s(S,this)}},{key:"_hasBootstrappedFeatureFlags",value:function(){var c,m;return(null===(c=this.config.bootstrap)||void 0===c?void 0:c.featureFlags)&&Object.keys(null===(m=this.config.bootstrap)||void 0===m?void 0:m.featureFlags).length>0||!1}},{key:"push",value:function(c){this._execute_array([c])}},{key:"capture",value:function(c,m){var y,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tY;if(!this.__loaded||!this.sessionPersistence||!this._requestQueue)return ec.uninitializedWarning("posthog.capture");if(!Kt(this)){var w=(k=k||tY).transport;if(w&&(k.transport=w),!I(c)&&E(c)){if(!ea||this.config.opt_out_useragent_filter||!mr(ea,this.config.custom_blocked_useragents)){this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info();var S,T,A,$,M={uuid:at(),event:c,properties:this._calculate_event_properties(c,m||{})};"$identify"===c&&(M.$set=k.$set,M.$set_once=k.$set_once),(S=M,T=k._noTruncate?null:this.config.properties_string_max_length,A=function(c){return E(c)&&!x(T)?c.slice(0,T):c},$=new Set,M=function e(c,m){var y;return c!==Object(c)?A?A(c,m):c:$.has(c)?void 0:($.add(c),H(c)?(y=[],Y(c,function(c){y.push(e(c))})):(y={},J(c,function(c,m){$.has(c)||(y[m]=e(c,m))})),y)}(S)).timestamp=k.timestamp||new Date;var q=t(t({},M.properties.$set),M.$set);(function(c){if(R(c)){for(var m in c)if(L.call(c,m))return!1;return!0}return!1})(q)||this.setPersonPropertiesForFlags(q),ec.info("send",M);var N=JSON.stringify(M),D=null!==(y=k._url)&&void 0!==y?y:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),B=k!==tY;return!this.config.request_batching||B&&!k._batchKey||k.send_instantly?this.__compress_and_send_json_request(D,N,k):this._requestQueue.enqueue(D,M,k),this._invokeCaptureHooks(c,M),M}}else ec.error("No event name provided to posthog.capture")}}},{key:"_addCaptureHook",value:function(c){this.__captureHooks.push(c)}},{key:"_invokeCaptureHooks",value:function(c,m){this.config._onCapture(c,m),J(this.__captureHooks,function(m){return m(c)})}},{key:"_calculate_event_properties",value:function(c,m){if(!this.persistence||!this.sessionPersistence)return m;var y=this.persistence.remove_event_timer(c),k=t({},m);if(k.token=this.config.token,"$snapshot"===c){var w=t(t({},this.persistence.properties()),this.sessionPersistence.properties());return k.distinct_id=w.distinct_id,k}var S=e8.properties();if(this.sessionManager){var T=this.sessionManager.checkAndGetSessionAndWindowId(),A=T.sessionId,$=T.windowId;k.$session_id=A,k.$window_id=$}if(this.sessionPropsManager&&this.config.__preview_send_client_session_params&&("$pageview"===c||"$pageleave"===c||"$autocapture"===c)){var M=this.sessionPropsManager.getSessionProps();k=K(k,M)}if(!this.config.disable_scroll_properties){var q={};"$pageview"===c?q=this.pageViewManager.doPageView():"$pageleave"===c&&(q=this.pageViewManager.doPageLeave()),k=K(k,q)}if("$pageview"===c&&en&&(k.title=en.title),"$performance_event"===c){var N=this.persistence.properties();return k.distinct_id=N.distinct_id,k.$current_url=S.$current_url,k}if(!I(y)){var D=(new Date).getTime()-y;k.$duration=parseFloat((D/1e3).toFixed(3))}ea&&this.config.opt_out_useragent_filter&&(k.$browser_type=mr(ea,this.config.custom_blocked_useragents)?"bot":"browser"),k=K({},e8.properties(),this.persistence.properties(),this.sessionPersistence.properties(),k);var B=this.config.property_blacklist;H(B)?J(B,function(c){delete k[c]}):ec.error("Invalid value for property_blacklist config: "+B);var L=this.config.sanitize_properties;return L&&(k=L(k,c)),k}},{key:"register",value:function(c,m){var y;null===(y=this.persistence)||void 0===y||y.register(c,m)}},{key:"register_once",value:function(c,m,y){var k;null===(k=this.persistence)||void 0===k||k.register_once(c,m,y)}},{key:"register_for_session",value:function(c){var m;null===(m=this.sessionPersistence)||void 0===m||m.register(c)}},{key:"unregister",value:function(c){var m;null===(m=this.persistence)||void 0===m||m.unregister(c)}},{key:"unregister_for_session",value:function(c){var m;null===(m=this.sessionPersistence)||void 0===m||m.unregister(c)}},{key:"_register_single",value:function(c,m){this.register(s({},c,m))}},{key:"getFeatureFlag",value:function(c,m){return this.featureFlags.getFeatureFlag(c,m)}},{key:"getFeatureFlagPayload",value:function(c){var m=this.featureFlags.getFeatureFlagPayload(c);try{return JSON.parse(m)}catch(c){return m}}},{key:"isFeatureEnabled",value:function(c,m){return this.featureFlags.isFeatureEnabled(c,m)}},{key:"reloadFeatureFlags",value:function(){this.featureFlags.reloadFeatureFlags()}},{key:"updateEarlyAccessFeatureEnrollment",value:function(c,m){this.featureFlags.updateEarlyAccessFeatureEnrollment(c,m)}},{key:"getEarlyAccessFeatures",value:function(c){var m=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(c,m)}},{key:"onFeatureFlags",value:function(c){return this.featureFlags.onFeatureFlags(c)}},{key:"onSessionId",value:function(c){var m,y;return null!==(m=null===(y=this.sessionManager)||void 0===y?void 0:y.onSessionId(c))&&void 0!==m?m:function(){}}},{key:"getSurveys",value:function(c){var m=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getSurveys(c,m)}},{key:"getActiveMatchingSurveys",value:function(c){var m=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getActiveMatchingSurveys(c,m)}},{key:"identify",value:function(c,m,y){if(!this.__loaded||!this.persistence)return ec.uninitializedWarning("posthog.identify");if(C(c)&&(c=c.toString(),ec.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),c){if(["distinct_id","distinctid"].includes(c.toLowerCase()))ec.critical('The string "'.concat(c,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else{var k=this.get_distinct_id();this.register({$user_id:c}),this.get_property("$device_id")||this.register_once({$had_persisted_distinct_id:!0,$device_id:k},""),c!==k&&c!==this.get_property(eg)&&(this.unregister(eg),this.register({distinct_id:c}));var w="anonymous"===this.persistence.get_user_state();c!==k&&w?(this.persistence.set_user_state("identified"),this.setPersonPropertiesForFlags(m||{},!1),this.capture("$identify",{distinct_id:c,$anon_distinct_id:k},{$set:m||{},$set_once:y||{}}),this.featureFlags.setAnonymousDistinctId(k)):(m||y)&&this.setPersonProperties(m,y),c!==k&&(this.reloadFeatureFlags(),this.unregister(eO))}}else ec.error("Unique user id has not been set in posthog.identify")}},{key:"setPersonProperties",value:function(c,m){(c||m)&&(this.setPersonPropertiesForFlags(c||{}),this.capture("$set",{$set:c||{},$set_once:m||{}}))}},{key:"group",value:function(c,m,y){if(c&&m){var k=this.getGroups();k[c]!==m&&this.resetGroupPropertiesForFlags(c),this.register({$groups:t(t({},k),{},s({},c,m))}),y&&(this.capture("$groupidentify",{$group_type:c,$group_key:m,$group_set:y}),this.setGroupPropertiesForFlags(s({},c,y))),k[c]===m||y||this.reloadFeatureFlags()}else ec.error("posthog.group requires a group type and group key")}},{key:"resetGroups",value:function(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}},{key:"setPersonPropertiesForFlags",value:function(c){var m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.featureFlags.setPersonPropertiesForFlags(c,m)}},{key:"resetPersonPropertiesForFlags",value:function(){this.featureFlags.resetPersonPropertiesForFlags()}},{key:"setGroupPropertiesForFlags",value:function(c){var m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.featureFlags.setGroupPropertiesForFlags(c,m)}},{key:"resetGroupPropertiesForFlags",value:function(c){this.featureFlags.resetGroupPropertiesForFlags(c)}},{key:"reset",value:function(c){if(!this.__loaded)return ec.uninitializedWarning("posthog.reset");var m,y,k,w,S=this.get_property("$device_id");null===(m=this.persistence)||void 0===m||m.clear(),null===(y=this.sessionPersistence)||void 0===y||y.clear(),null===(k=this.persistence)||void 0===k||k.set_user_state("anonymous"),null===(w=this.sessionManager)||void 0===w||w.resetSessionId();var T=this.config.get_device_id(at());this.register_once({distinct_id:T,$device_id:c?T:S},"")}},{key:"get_distinct_id",value:function(){return this.get_property("distinct_id")}},{key:"getGroups",value:function(){return this.get_property("$groups")||{}}},{key:"get_session_id",value:function(){var c,m;return null!==(c=null===(m=this.sessionManager)||void 0===m?void 0:m.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==c?c:""}},{key:"get_session_replay_url",value:function(c){if(!this.sessionManager)return"";var m=this.sessionManager.checkAndGetSessionAndWindowId(!0),y=m.sessionId,k=m.sessionStartTimestamp,w=this.requestRouter.endpointFor("ui","/replay/"+y);if(null!=c&&c.withTimestamp&&k){var S,T=null!==(S=c.timestampLookBack)&&void 0!==S?S:10;if(!k)return w;var A=Math.max(Math.floor(((new Date).getTime()-k)/1e3)-T,0);w+="?t=".concat(A)}return w}},{key:"alias",value:function(c,m){return c===this.get_property(e_)?(ec.critical("Attempting to create alias for existing People user - aborting."),-2):(I(m)&&(m=this.get_distinct_id()),c!==m?(this._register_single(eg,c),this.capture("$create_alias",{alias:c,distinct_id:m})):(ec.warn("alias matches current distinct_id - skipping api call."),this.identify(c),-1))}},{key:"set_config",value:function(c){var m,y,k=t({},this.config);if(R(c)&&(K(this.config,c),this.config.persistence_name||(this.config.persistence_name=this.config.cookie_name),this.config.disable_persistence||(this.config.disable_persistence=this.config.disable_cookie),null===(m=this.persistence)||void 0===m||m.update_config(this.config),null===(y=this.sessionPersistence)||void 0===y||y.update_config(this.config),eQ.is_supported()&&"true"===eQ.get("ph_debug")&&(this.config.debug=!0),this.config.debug&&(N.DEBUG=!0),this.sessionRecording&&!I(c.disable_session_recording))){var w=k.disable_session_recording!==c.disable_session_recording,S=!Kt(this)&&!c.disable_session_recording&&!this.sessionRecording.started;(w||S)&&(c.disable_session_recording?this.sessionRecording.stopRecording():this.sessionRecording.startRecordingIfEnabled())}}},{key:"startSessionRecording",value:function(){this.set_config({disable_session_recording:!1})}},{key:"stopSessionRecording",value:function(){this.set_config({disable_session_recording:!0})}},{key:"sessionRecordingStarted",value:function(){var c;return!(null===(c=this.sessionRecording)||void 0===c||!c.started)}},{key:"loadToolbar",value:function(c){return this.toolbar.loadToolbar(c)}},{key:"get_property",value:function(c){var m;return null===(m=this.persistence)||void 0===m?void 0:m.props[c]}},{key:"getSessionProperty",value:function(c){var m;return null===(m=this.sessionPersistence)||void 0===m?void 0:m.props[c]}},{key:"toString",value:function(){var c,m=null!==(c=this.config.name)&&void 0!==c?c:tZ;return m!==tZ&&(m=tZ+"."+m),m}},{key:"_gdpr_init",value:function(){"localStorage"===this.config.opt_out_capturing_persistence_type&&eQ.is_supported()&&(!this.has_opted_in_capturing()&&this.has_opted_in_capturing({persistence_type:"cookie"})&&this.opt_in_capturing({enable_persistence:!1}),!this.has_opted_out_capturing()&&this.has_opted_out_capturing({persistence_type:"cookie"})&&this.opt_out_capturing({clear_persistence:!1}),this.clear_opt_in_out_capturing({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_capturing()?this._gdpr_update_persistence({clear_persistence:!0}):!this.has_opted_in_capturing()&&(this.config.opt_out_capturing_by_default||eG.get("ph_optout"))&&(eG.remove("ph_optout"),this.opt_out_capturing({clear_persistence:this.config.opt_out_persistence_by_default}))}},{key:"_gdpr_update_persistence",value:function(c){var m,y,k,w,S;if(c&&c.clear_persistence)k=!0;else{if(!c||!c.enable_persistence)return;k=!1}this.config.disable_persistence||(null===(m=this.persistence)||void 0===m?void 0:m.disabled)===k||null===(w=this.persistence)||void 0===w||w.set_disabled(k),this.config.disable_persistence||(null===(y=this.sessionPersistence)||void 0===y?void 0:y.disabled)===k||null===(S=this.sessionPersistence)||void 0===S||S.set_disabled(k)}},{key:"_gdpr_call_func",value:function(c,m){return m=K({capture:this.capture.bind(this),persistence_type:this.config.opt_out_capturing_persistence_type,cookie_prefix:this.config.opt_out_capturing_cookie_prefix,cookie_expiration:this.config.cookie_expiration,cross_subdomain_cookie:this.config.cross_subdomain_cookie,secure_cookie:this.config.secure_cookie},m||{}),eQ.is_supported()||"localStorage"!==m.persistence_type||(m.persistence_type="cookie"),c(this.config.token,{capture:m.capture,captureEventName:m.capture_event_name,captureProperties:m.capture_properties,persistenceType:m.persistence_type,persistencePrefix:m.cookie_prefix,cookieExpiration:m.cookie_expiration,crossSubdomainCookie:m.cross_subdomain_cookie,secureCookie:m.secure_cookie})}},{key:"opt_in_capturing",value:function(c){c=K({enable_persistence:!0},c||{}),this._gdpr_call_func(Ht,c),this._gdpr_update_persistence(c)}},{key:"opt_out_capturing",value:function(c){var m=K({clear_persistence:!0},c||{});this._gdpr_call_func(Ut,m),this._gdpr_update_persistence(m)}},{key:"has_opted_in_capturing",value:function(c){return this._gdpr_call_func(Wt,c)}},{key:"has_opted_out_capturing",value:function(c){return this._gdpr_call_func(Vt,c)}},{key:"clear_opt_in_out_capturing",value:function(c){var m=K({enable_persistence:!0},null!=c?c:{});this._gdpr_call_func(zt,m),this._gdpr_update_persistence(m)}},{key:"debug",value:function(c){!1===c?(null==U||U.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(null==U||U.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}}]),e}();!function(c,m){for(var y=0;y<m.length;y++)c.prototype[m[y]]=ne(c.prototype[m[y]])}(t2,["identify"]);var t3,t5,t8,t6={};(k=t5||(t5={})).Popover="popover",k.API="api",k.Widget="widget",(w=t8||(t8={})).Open="open",w.MultipleChoice="multiple_choice",w.SingleChoice="single_choice",w.Rating="rating",w.Link="link";var t4=(tW=tV.INIT_MODULE,(tJ=new t2).init=function(c,m,y){if(y)return tJ[y]||(tJ[y]=t6[y]=Fr(c||"",m||{},y,function(c){tJ[y]=t6[y]=c,c._loaded()})),tJ[y];var k=tJ;return t6[tZ]?k=t6[tZ]:c&&(k=Fr(c,m||{},tZ,function(c){t6[tZ]=c,c._loaded()}),t6[tZ]=k),tJ=k,tW===tV.INIT_SNIPPET&&(eu[tZ]=tJ),J(t6,function(c,m){m!==tZ&&(tJ[m]=c)}),k},tJ.init(),function(){function e(){e.done||(e.done=!0,t0=!1,J(t6,function(c){c._dom_loaded()}))}null!=en&&en.addEventListener&&("complete"===en.readyState?e():en.addEventListener("DOMContentLoaded",e,!1)),U&&eh(U,"load",e,!0)}(),tJ),t7=(0,T.createContext)({client:t4});function PostHogProvider(c){var m=c.children,y=c.client,k=c.apiKey,w=c.options,S=(0,T.useMemo)(function(){return(y&&k&&console.warn("[PostHog.js] You have provided both a client and an apiKey to PostHogProvider. The apiKey will be ignored in favour of the client."),y&&w&&console.warn("[PostHog.js] You have provided both a client and options to PostHogProvider. The options will be ignored in favour of the client."),y)?y:(k&&(t4.__loaded&&console.warn("[PostHog.js] was already loaded elsewhere. This may cause issues."),t4.init(k,w)),t4)},[y,k]);return T.createElement(t7.Provider,{value:{client:S}},m)}var t9=y(2572);let pageview=c=>{window.dataLayer.push({event:"pageview",page:c})};y(6762),t4.init("VfwpB7hg0i5IkyEVw5zgUuuSRjKtUwajwjNBON3mRRc",{api_host:"https://app.posthog.com",loaded:c=>{}});var _app=function(c){let{Component:m,pageProps:y}=c,k=(0,M.useRouter)();return(0,T.useEffect)(()=>{let handleRouteChange=()=>{null==t4||t4.capture("$pageview"),pageview()};return k.events.on("routeChangeComplete",handleRouteChange),()=>{k.events.off("routeChangeComplete",handleRouteChange)}},[k.events]),(0,S.jsx)(PostHogProvider,{client:t4,children:(0,S.jsxs)(t9.W,{children:[(0,S.jsx)($(),{id:"gtag-base",strategy:"afterInteractive",dangerouslySetInnerHTML:{__html:"\n            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n            })(window,document,'script','dataLayer', '".concat("GTM-5C5VGGJ","');\n          ")}}),(0,S.jsx)($(),{id:"hs-script-loader",type:"text/javascript",src:"//js.hs-scripts.com/5871640.js",strategy:"afterInteractive"}),(0,S.jsx)($(),{id:"segment-script",dangerouslySetInnerHTML:{__html:q.V({apiKey:"fXhkcm9NBycZIzNyxyb1cebC9Uw32JYQ",page:!0})}}),(0,S.jsx)(m,{...y})]})})}},6762:function(){},1163:function(c,m,y){c.exports=y(9974)},4298:function(c,m,y){c.exports=y(5354)}},function(c){var __webpack_exec__=function(m){return c(c.s=m)};c.O(0,[9774,179],function(){return __webpack_exec__(6840),__webpack_exec__(9974)}),_N_E=c.O()}]);